!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("function-analytics",[],t):"object"==typeof exports?exports["function-analytics"]=t():e["function-analytics"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=29)}([function(e,t,r){"use strict";var n=r(6),s=r(12),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===o.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:s,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,s=arguments.length;n<s;n++)c(arguments[n],r);return t},extend:function(e,t,r){return c(t,function(t,s){e[s]=r&&"function"==typeof t?n(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return f});var n=r(3),s=r.n(n),o=r(10),i=r.n(o),a=r(2),u=r.n(a);let c;class f{static initiateRunner(e){f.instance||(this.config=e,this.cache={},c=this)}get instance(){return c}set config(e){this.config=e}get config(){return this.config}_fetch(e,t,r){if(!c){throw Error('Configration not set please configre function analytics eg {baseUrl:"dhis_base_url", username:"username", password:"password"}')}const n={url:c.config.baseUrl+e.url,method:"get",adapter:u.a};c.config.username&&c.config.password&&(n.auth={username:c.config.username,password:c.config.password}),i.a.request(n).then(r=>{t(e.performPostProcess(r.data))},e=>{r(e)})}getResults(e){if(e._fetchers)return this.getAllResults(e);let t=e.hash();return c.cache[t]||(c.cache[t]=new s.a((t,r,n)=>{e.hasDependencies()?e.getDependecyFetchResults().then(()=>{e.performPreProcess(),this._fetch(e,t,r)}).catch(e=>{console.log("Errrrrrrrrrr:",e),r()}):this._fetch(e,t,r)})),c.cache[t]}getAllResults(e){return new s.a((t,r,n)=>{const o=e.fetchers.map(e=>(new f).getResults(e));return s.a.all(o).then(r=>{t(e.performPostProcess(r))}).catch(e=>{r(e)})})}}}).call(this,r(5))},function(e,t,r){"use strict";var n=r(0),s=r(15),o=r(17),i=r(18),a=r(19),u=r(7),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(20);e.exports=function(e){return new Promise(function(t,f){var h=e.data,l=e.headers;n.isFormData(h)&&delete l["Content-Type"];var p=new XMLHttpRequest,d="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||a(e.url)||(p=new window.XDomainRequest,d="onload",m=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var g=e.auth.username||"",y=e.auth.password||"";l.Authorization="Basic "+c(g+":"+y)}if(p.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[d]=function(){if(p&&(4===p.readyState||m)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?i(p.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:r,config:e,request:p};s(t,f,n),p=null}},p.onerror=function(){f(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){f(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var w=r(21),v=(e.withCredentials||a(e.url))&&e.xsrfCookieName?w.read(e.xsrfCookieName):void 0;v&&(l[e.xsrfHeaderName]=v)}if("setRequestHeader"in p&&n.forEach(l,function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete l[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),f(e),p=null)}),void 0===h&&(h=null),p.send(h)})}},function(e,t,r){"use strict";const n=Symbol?Symbol():"__listeners";class s extends Promise{constructor(e){super((t,r)=>e(t,r,e=>{try{return this[n].forEach(t=>t(e))}catch(e){r(e)}})),this[n]=[]}progress(e){if("function"!=typeof e)throw new Error("PROGRESS_REQUIRES_FUNCTION");return this[n].push(e),this}static all(e){const t=new Array(e.length),r=e.length;let n=0;return new s((s,o,i)=>{e.forEach((e,a)=>{e.then(e=>{t[a]=e,t.proportion=++n/r,i(t),n===r&&s(t)}).catch(o)})})}static sequence(e,t){const r=[],n=e.length;let o=0;return new s((s,i,a)=>{!function u(){t.call(null,e[r.length]).then(e=>{r.push(e),r.proportion=++o/n,a(r),r.length===n?s(r):u()}).catch(i)}()})}}e.exports=s},function(e,t,r){"use strict";(function(t){var n=r(0),s=r(14),o={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:("undefined"!=typeof XMLHttpRequest?a=r(2):void 0!==t&&(a=r(2)),a),transformRequest:[function(e,t){return s(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){u.headers[e]={}}),n.forEach(["post","put","patch"],function(e){u.headers[e]=n.merge(o)}),e.exports=u}).call(this,r(5))},function(e,t){var r,n,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var u,c=[],f=!1,h=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!f){var e=a(l);f=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||f||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(16);e.exports=function(e,t,r,s,o){var i=new Error(e);return n(i,t,r,s,o)}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){e.exports=r(11)},function(e,t,r){"use strict";var n=r(0),s=r(6),o=r(13),i=r(4);function a(e){var t=new o(e),r=s(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var u=a(i);u.Axios=o,u.create=function(e){return a(n.merge(i,e))},u.Cancel=r(9),u.CancelToken=r(27),u.isCancel=r(8),u.all=function(e){return Promise.all(e)},u.spread=r(28),e.exports=u,e.exports.default=u},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var n=r(4),s=r(0),o=r(22),i=r(23);function a(e){this.defaults=e,this.interceptors={request:new o,response:new o}}a.prototype.request=function(e){"string"==typeof e&&(e=s.merge({url:arguments[0]},arguments[1])),(e=s.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[i,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},s.forEach(["delete","get","head","options"],function(e){a.prototype[e]=function(t,r){return this.request(s.merge(r||{},{method:e,url:t}))}}),s.forEach(["post","put","patch"],function(e){a.prototype[e]=function(t,r,n){return this.request(s.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=a},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t,r){var s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,s){return e.config=t,r&&(e.code=r),e.request=n,e.response=s,e}},function(e,t,r){"use strict";var n=r(0);function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var i=[];n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),i.push(s(t)+"="+s(e))}))}),o=i.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,r){"use strict";var n=r(0),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,i={};return e?(n.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(i[t]&&s.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}}),i):i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function s(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=s(window.location.href),function(t){var r=n.isString(t)?s(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function s(){this.message="String contains an invalid character"}s.prototype=new Error,s.prototype.code=5,s.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,o=String(e),i="",a=0,u=n;o.charAt(0|a)||(u="=",a%1);i+=u.charAt(63&t>>8-a%1*8)){if((r=o.charCodeAt(a+=.75))>255)throw new s;t=t<<8|r}return i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,s,o,i){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(s)&&a.push("path="+s),n.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(0);function s(){this.handlers=[]}s.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=s},function(e,t,r){"use strict";var n=r(0),s=r(24),o=r(8),i=r(4),a=r(25),u=r(26);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!a(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||i.adapter)(e).then(function(t){return c(e),t.data=s(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(9);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.source=function(){var e;return{token:new s(function(t){e=t}),cancel:e}},e.exports=s},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";r.r(t);var n=r(1);class s{constructor(){this.postProcessors=[],this.dependencies=[]}hasDependencies(){return this.dependencies.length>0}preProcess(e){return this.dependencies.push(e),this}addPreProcess(e){return this.dependencies.push(e),this}postProcess(e){return this.postProcessors.push(e),this}addPostProcess(e){return this.postProcessors.push(e),this}performPreProcess(){return this.dependencies.forEach(e=>{e.processCallback(e.process._results,this)}),this}performPostProcess(e){this._results=e;let t=e;return this.postProcessors.forEach(e=>{t=e(t)}),t}}var o=r(3),i=r.n(o);class a extends s{constructor(){super(),this.parameters={}}get _urlParameters(){let e="";return Object.keys(this.parameters).forEach(t=>{""!==e&&(e+="&"),"string"==typeof this.parameters[t]?e+=t+"="+this.parameters[t]:Object.keys(this.parameters[t]).forEach(r=>{""!==e&&(e+="&"),""===this.parameters[t][r]?e+=t+"="+r:e+=t+"="+r+":"+this.parameters[t][r]})}),e}get url(){throw new Error("Should implement url generation")}get(){return(new n.a).getResults(this)}setParameters(e){return Object.keys(e).forEach(t=>{this.parameters[t]=e[t]}),this}getDependecyFetchResults(){const e=this.dependencies.map(e=>(new n.a).getResults(e.process));return i.a.all(e)}_encode64(e){return btoa(new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),""))}hash(){return this.url}}class u{constructor(e,t,r){this.row=e,this.headers=t,this.metaData=r}dimension(e){var t=-1,r="";return this.headers.forEach((r,n)=>{r.name===e&&(t=n)}),this.metaData.names?r=this.metaData.names[this.row[t]]:this.metaData.items&&(r=this.metaData.items[this.row[t]]?this.metaData.items[this.row[t]].name:void 0),{id:this.row[t],name:r,path:this.metaData.ouHierarchy&&void 0!==this.metaData.ouHierarchy[this.row[t]]?this.metaData.ouHierarchy[this.row[t]]:void 0}}get dx(){return this.dimension("dx")}get pe(){return this.dimension("pe")}get ou(){return this.dimension("ou")}get value(){return this.dimension("value").id}}class c{constructor(e){this._data=e}get headers(){return this._data.headers}get metaData(){return this._data.metaData}get rows(){let e=[];return this._data.rows.forEach(t=>{e.push(new u(t,this.headers,this.metaData))}),e}get height(){return this._data.height}get width(){return this._data.width}}class f extends a{constructor(e=25){super(),"boolean"==typeof e&&(e=e?25:26),this.parameters.dimension={},this.postProcess(t=>this.standardizeAnalytics(t,e))}setData(e){return this.setDimension("dx",e),this}setPeriod(e){return this.setDimension("pe",e),this}setOrgUnit(e){return this.setDimension("ou",e),this}setDimension(e,t){return this.parameters.dimension[e]=t||"",this}standardizeAnalytics(e,t=25){if("boolean"==typeof t&&(t=t?25:26),e.count)return e;let r={headers:[],metaData:{dimensions:{},names:{},dx:[],pe:[],ou:[],co:[]},rows:[]};if(e){if(e.headers&&e.headers.forEach(e=>{try{let t=e;r.headers.push(t)}catch(e){console.warn("Invalid header object")}}),e.metaData)try{let n=this.getSanitizedAnalyticsMetadata(e.metaData,t);r.metaData=n}catch(e){console.warn("Invalid metadata object")}e.rows&&(r.rows=e.rows)}return r.height=e.height,r.width=e.width,new c(r)}getSanitizedAnalyticsMetadata(e,t){let r={};return e&&(e.ouHierarchy&&(r.ouHierarchy=e.ouHierarchy),t<26?(r.names={},e.names?r.names=e.names:e.items&&Object.keys(e.items).forEach(t=>{r.names[t]=e.items[t].name}),e.dimensions&&Object.keys(e.dimensions).forEach(t=>{r[t]=e.dimensions[t]})):(r.items={},e.items?r.items=e.items:e.names&&Object.keys(e.items).forEach(t=>{e.items[t]={name:e.names[t]}}),e.dimensions?r.dimensions=e.dimensions:(r.dimensions={},Object.keys(e).forEach(t=>{-1===["names","items","dimensions"].indexOf(t)&&(r.dimensions[t]=e[t])})))),r}get url(){return"analytics?"+this._urlParameters}}const h=Symbol?Symbol():"__listeners";class l extends Promise{constructor(e){super((t,r)=>e(t,r,e=>{try{return this[h].forEach(t=>t(e))}catch(e){r(e)}})),this[h]=[]}progress(e){if("function"!=typeof e)throw new Error("PROGRESS_REQUIRES_FUNCTION");return this[h].push(e),this}static all(e){const t=new Array(e.length),r=e.length;let n=0;return new l((s,o,i)=>{e.forEach((e,a)=>{e.then(e=>{t[a]=e,t.proportion=++n/r,i(t),n===r&&s(t)}).catch(o)})})}static sequence(e,t){const r=[],n=e.length;let s=0;return new l((o,i,a)=>{!function u(){t.call(null,e[r.length]).then(e=>{r.push(e),r.proportion=++s/n,a(r),r.length===n?o(r):u()}).catch(i)}()})}}class p extends a{constructor(e){super(),this._fetchers=e}get fetchers(){return this._fetchers}get(){return(new n.a).getAllResults(this)}}r.d(t,"Fn",function(){return d});let d={Promise:l,Analytics:f,EventAnalytics:class extends f{setProgram(e){return this.program=e,this}get url(){return"analytics/events/query/"+this.program+"?"+this._urlParameters}},AnalyticsResult:c,IdentifiableObject:class extends a{constructor(e){super(),this._filters=[],this.objectName=e}get name(){return this.objectName}where(e,t,r){return this._filters.push({right:e,operator:t,left:r}),this}get url(){var e=this._urlParameters;return this._filters.forEach(t=>{""!==e&&(e+="&"),e+="filter="+t.right,"=="===t.operator?e+=":eq:"+t.left:"<"===t.operator?e+=":lt:"+t.left:"<="===t.operator?e+=":le:"+t.left:">"===t.operator?e+=":gt:"+t.left:">="===t.operator?e+=":ge:"+t.left:"<>"===t.operator?e+=":!eq:"+t.left:"in"===t.operator||"!in"===t.operator?e+=":"+t.operator+":["+t.left+"]":t.left?e+=":"+t.operator+":"+t.left:e+=":"+t.operator}),this.name+".json?"+e}},SQLViewData:class extends a{constructor(e){super(),this._id=e,this.parameters.var={}}setVariable(e,t){return this.parameters.var[e]=t||"",this}get url(){return"sqlViews/"+this._id+"/data.json?"+this._urlParameters}},Runner:n.a,Dependency:class{constructor(e,t){this.process=e,this.processCallback=t}},MultiFetcher:p,all:e=>new p(e),init:e=>{n.a.initiateRunner(e)}};"undefined"!=typeof window&&(window.Fn=d)}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3Mvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL3V0aWxzLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy91dGlsaXRpZXMvcnVubmVyLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9wcm9ncmVzcy1wcm9taXNlL2luZGV4LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYmluZC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9pcy1idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9zZXR0bGUuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2VuaGFuY2VFcnJvci5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9idG9hLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2Rpc3BhdGNoUmVxdWVzdC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9zcmMvdXRpbGl0aWVzL3Byb2Nlc3MuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL3V0aWxpdGllcy9mZXRjaGVyLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy9yZXN1bHQvcm93LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy9yZXN1bHQvYW5hbHl0aWNzLXJlc3VsdC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9zcmMvbW9kZWwvYW5hbHl0aWNzLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy91dGlsaXRpZXMvcHJvZ3Jlc3MtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9zcmMvdXRpbGl0aWVzL211bHRpLWZldGNoZXIuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy9tb2RlbC9ldmVudC1hbmFseXRpY3MuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL21vZGVsL2lkZW50aWZpYWJsZS1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL21vZGVsL3NxbC12aWV3LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy91dGlsaXRpZXMvZGVwZW5kZW5jeS5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwidGhpcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJpc0J1ZmZlciIsInRvU3RyaW5nIiwiaXNBcnJheSIsInZhbCIsImlzT2JqZWN0IiwiaXNGdW5jdGlvbiIsImZvckVhY2giLCJvYmoiLCJmbiIsImxlbmd0aCIsImlzQXJyYXlCdWZmZXIiLCJpc0Zvcm1EYXRhIiwiRm9ybURhdGEiLCJpc0FycmF5QnVmZmVyVmlldyIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiYnVmZmVyIiwiaXNTdHJpbmciLCJpc051bWJlciIsImlzVW5kZWZpbmVkIiwiaXNEYXRlIiwiaXNGaWxlIiwiaXNCbG9iIiwiaXNTdHJlYW0iLCJwaXBlIiwiaXNVUkxTZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJpc1N0YW5kYXJkQnJvd3NlckVudiIsIm5hdmlnYXRvciIsInByb2R1Y3QiLCJ3aW5kb3ciLCJkb2N1bWVudCIsIm1lcmdlIiwicmVzdWx0IiwiYXNzaWduVmFsdWUiLCJhcmd1bWVudHMiLCJleHRlbmQiLCJhIiwiYiIsInRoaXNBcmciLCJ0cmltIiwic3RyIiwicmVwbGFjZSIsInByb2Nlc3MiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiUnVubmVyIiwicHJvZ3Jlc3NfcHJvbWlzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwicHJvZ3Jlc3NfcHJvbWlzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQiLCJheGlvc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiYXhpb3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0IiwiYXhpb3NfbGliX2FkYXB0ZXJzX2h0dHBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsImF4aW9zX2xpYl9hZGFwdGVyc19odHRwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdCIsIl9pbnN0YW5jZSIsIltvYmplY3QgT2JqZWN0XSIsImNvbmZpZ3VyYXRpb25zIiwiaW5zdGFuY2UiLCJjb25maWciLCJjYWNoZSIsIl9mZXRjaCIsImZldGNoZXIiLCJyZXNvbHZlIiwicmVqZWN0IiwiRXJyb3IiLCJ1cmwiLCJiYXNlVXJsIiwibWV0aG9kIiwiYWRhcHRlciIsImh0dHBhZGFwdGVyIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImF1dGgiLCJheGlvcyIsInJlcXVlc3QiLCJ0aGVuIiwicmVzdWx0cyIsInBlcmZvcm1Qb3N0UHJvY2VzcyIsImRhdGEiLCJlcnIiLCJnZXRSZXN1bHRzIiwiX2ZldGNoZXJzIiwiZ2V0QWxsUmVzdWx0cyIsImhhc2hlZCIsImhhc2giLCJQcm9ncmVzc1Byb21pc2UiLCJwcm9ncmVzcyIsImhhc0RlcGVuZGVuY2llcyIsImdldERlcGVuZGVjeUZldGNoUmVzdWx0cyIsInBlcmZvcm1QcmVQcm9jZXNzIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwibXVsdGlmZXRjaGVyIiwicHJvbWlzZXMiLCJmZXRjaGVycyIsIm1hcCIsImFsbCIsInV0aWxzIiwic2V0dGxlIiwiYnVpbGRVUkwiLCJwYXJzZUhlYWRlcnMiLCJpc1VSTFNhbWVPcmlnaW4iLCJjcmVhdGVFcnJvciIsImJ0b2EiLCJQcm9taXNlIiwicmVxdWVzdERhdGEiLCJyZXF1ZXN0SGVhZGVycyIsImhlYWRlcnMiLCJYTUxIdHRwUmVxdWVzdCIsImxvYWRFdmVudCIsInhEb21haW4iLCJYRG9tYWluUmVxdWVzdCIsIm9ucHJvZ3Jlc3MiLCJvbnRpbWVvdXQiLCJBdXRob3JpemF0aW9uIiwib3BlbiIsInRvVXBwZXJDYXNlIiwicGFyYW1zIiwicGFyYW1zU2VyaWFsaXplciIsInRpbWVvdXQiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VVUkwiLCJpbmRleE9mIiwicmVzcG9uc2VIZWFkZXJzIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwicmVzcG9uc2UiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJzdGF0dXNUZXh0Iiwib25lcnJvciIsImNvb2tpZXMiLCJ4c3JmVmFsdWUiLCJ3aXRoQ3JlZGVudGlhbHMiLCJ4c3JmQ29va2llTmFtZSIsInJlYWQiLCJ1bmRlZmluZWQiLCJ4c3JmSGVhZGVyTmFtZSIsInRvTG93ZXJDYXNlIiwic2V0UmVxdWVzdEhlYWRlciIsImUiLCJvbkRvd25sb2FkUHJvZ3Jlc3MiLCJhZGRFdmVudExpc3RlbmVyIiwib25VcGxvYWRQcm9ncmVzcyIsInVwbG9hZCIsImNhbmNlbFRva2VuIiwicHJvbWlzZSIsImNhbmNlbCIsImFib3J0Iiwic2VuZCIsIkxJU1RFTkVSUyIsImV4ZWN1dG9yIiwic3VwZXIiLCJsaXN0ZW5lciIsImVycm9yIiwiaGFuZGxlciIsInB1c2giLCJBcnJheSIsInJlc29sdmVDb3VudCIsImluZGV4IiwicHJvcG9ydGlvbiIsImlucHV0cyIsImludm9rZU5leHQiLCJub3JtYWxpemVIZWFkZXJOYW1lIiwiREVGQVVMVF9DT05URU5UX1RZUEUiLCJDb250ZW50LVR5cGUiLCJzZXRDb250ZW50VHlwZUlmVW5zZXQiLCJkZWZhdWx0cyIsInRyYW5zZm9ybVJlcXVlc3QiLCJKU09OIiwic3RyaW5naWZ5IiwidHJhbnNmb3JtUmVzcG9uc2UiLCJwYXJzZSIsIm1heENvbnRlbnRMZW5ndGgiLCJ2YWxpZGF0ZVN0YXR1cyIsImNvbW1vbiIsIkFjY2VwdCIsImNhY2hlZFNldFRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJkcmFpbmluZyIsInF1ZXVlSW5kZXgiLCJjbGVhblVwTmV4dFRpY2siLCJjb25jYXQiLCJkcmFpblF1ZXVlIiwibGVuIiwicnVuIiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsImFycmF5Iiwibm9vcCIsIm5leHRUaWNrIiwiYXJncyIsImFwcGx5IiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiZW5oYW5jZUVycm9yIiwibWVzc2FnZSIsImNvZGUiLCJfX0NBTkNFTF9fIiwiQ2FuY2VsIiwiQXhpb3MiLCJjcmVhdGVJbnN0YW5jZSIsImRlZmF1bHRDb25maWciLCJjb250ZXh0IiwiaW5zdGFuY2VDb25maWciLCJDYW5jZWxUb2tlbiIsImlzQ2FuY2VsIiwic3ByZWFkIiwiZGVmYXVsdCIsImNvbnN0cnVjdG9yIiwicmVhZEZsb2F0TEUiLCJzbGljZSIsImlzU2xvd0J1ZmZlciIsIl9pc0J1ZmZlciIsIkludGVyY2VwdG9yTWFuYWdlciIsImRpc3BhdGNoUmVxdWVzdCIsImludGVyY2VwdG9ycyIsImNoYWluIiwiaW50ZXJjZXB0b3IiLCJ1bnNoaWZ0IiwiZnVsZmlsbGVkIiwicmVqZWN0ZWQiLCJzaGlmdCIsIm5vcm1hbGl6ZWROYW1lIiwiZW5jb2RlIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic2VyaWFsaXplZFBhcmFtcyIsInBhcnRzIiwidiIsInRvSVNPU3RyaW5nIiwiam9pbiIsImlnbm9yZUR1cGxpY2F0ZU9mIiwicGFyc2VkIiwic3BsaXQiLCJsaW5lIiwic3Vic3RyIiwib3JpZ2luVVJMIiwibXNpZSIsInRlc3QiLCJ1c2VyQWdlbnQiLCJ1cmxQYXJzaW5nTm9kZSIsImNyZWF0ZUVsZW1lbnQiLCJyZXNvbHZlVVJMIiwiaHJlZiIsInNldEF0dHJpYnV0ZSIsInByb3RvY29sIiwiaG9zdCIsInNlYXJjaCIsImhvc3RuYW1lIiwicG9ydCIsInBhdGhuYW1lIiwiY2hhckF0IiwibG9jYXRpb24iLCJyZXF1ZXN0VVJMIiwiY2hhcnMiLCJFIiwiaW5wdXQiLCJibG9jayIsImNoYXJDb2RlIiwiU3RyaW5nIiwib3V0cHV0IiwiaWR4IiwiY2hhckNvZGVBdCIsIndyaXRlIiwiZXhwaXJlcyIsInBhdGgiLCJkb21haW4iLCJzZWN1cmUiLCJjb29raWUiLCJEYXRlIiwidG9HTVRTdHJpbmciLCJtYXRjaCIsIlJlZ0V4cCIsImRlY29kZVVSSUNvbXBvbmVudCIsInJlbW92ZSIsIm5vdyIsImhhbmRsZXJzIiwidXNlIiwiZWplY3QiLCJpZCIsImgiLCJ0cmFuc2Zvcm1EYXRhIiwiaXNBYnNvbHV0ZVVSTCIsImNvbWJpbmVVUkxzIiwidGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZCIsInRocm93SWZSZXF1ZXN0ZWQiLCJiYXNlVVJMIiwicmVhc29uIiwiZm5zIiwicmVsYXRpdmVVUkwiLCJUeXBlRXJyb3IiLCJyZXNvbHZlUHJvbWlzZSIsInRva2VuIiwic291cmNlIiwiY2FsbGJhY2siLCJhcnIiLCJQcm9jZXNzIiwicG9zdFByb2Nlc3NvcnMiLCJkZXBlbmRlbmNpZXMiLCJwcmVQcm9jZXNzIiwiZGVwZW5kZW5jeSIsImFkZFByZVByb2Nlc3MiLCJwb3N0UHJvY2VzcyIsImFkZFBvc3RQcm9jZXNzIiwicHJvY2Vzc0NhbGxiYWNrIiwiX3Jlc3VsdHMiLCJkYXRhVG9Qcm9jZXNzIiwiRmV0Y2hlciIsInBhcmFtZXRlcnMiLCJfdXJsUGFyYW1ldGVycyIsImtleXMiLCJrZXkyIiwic2V0UGFyYW1ldGVycyIsIl9lbmNvZGU2NCIsImJ1ZmYiLCJVaW50OEFycmF5IiwicmVkdWNlIiwiZnJvbUNoYXJDb2RlIiwiUm93Iiwicm93IiwibWV0YURhdGEiLCJkaW1lbnNpb24iLCJoZWFkZXIiLCJuYW1lcyIsIml0ZW1zIiwib3VIaWVyYXJjaHkiLCJkeCIsInBlIiwib3UiLCJBbmFseXRpY3NSZXN1bHQiLCJhbmFseXRpY3NPYmplY3QiLCJfZGF0YSIsInJvd3MiLCJoZWlnaHQiLCJ3aWR0aCIsIkFuYWx5dGljcyIsInN0YW5kYXJkaXplQW5hbHl0aWNzIiwic2V0RGF0YSIsInNldERpbWVuc2lvbiIsInNldFBlcmlvZCIsInNldE9yZ1VuaXQiLCJkaW0iLCJjb3VudCIsInNhbml0aXplZEFuYWx5dGljc09iamVjdCIsImRpbWVuc2lvbnMiLCJjbyIsIm5ld0hlYWRlciIsIndhcm4iLCJzYW5pdGl6ZWRNZXRhZGF0YSIsImdldFNhbml0aXplZEFuYWx5dGljc01ldGFkYXRhIiwiYW5hbHl0aWNNZXRhZGF0YSIsIm5hbWVLZXkiLCJNdWx0aUZldGNoZXIiLCJGbiIsIkV2ZW50QW5hbHl0aWNzIiwic2V0UHJvZ3JhbSIsInByb2dyYW0iLCJJZGVudGlmaWFibGVPYmplY3QiLCJvYmplY3ROYW1lIiwiX2ZpbHRlcnMiLCJ3aGVyZSIsInJpZ2h0Iiwib3BlcmF0b3IiLCJsZWZ0IiwiZmlsdGVyIiwiU1FMVmlld0RhdGEiLCJfaWQiLCJzZXRWYXJpYWJsZSIsInZhcmlhYmxlIiwiRGVwZW5kZW5jeSIsImluaXQiLCJpbml0aWF0ZVJ1bm5lciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsSUFDQSxtQkFBQUcsZUFBQUMsSUFDQUQsT0FBQSx3QkFBQUgsR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxzQkFBQUQsSUFFQUQsRUFBQSxzQkFBQUMsSUFSQSxDQVNDLG9CQUFBSyxVQUFBQyxLQUFBLFdBQ0QsbUJDVEEsSUFBQUMsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUixRQUdBLElBQUFDLEVBQUFLLEVBQUFFLEdBQUEsQ0FDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBVixRQUFBLElBVUEsT0FOQVcsRUFBQUgsR0FBQUksS0FBQVgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQU8sR0FHQU4sRUFBQVMsR0FBQSxFQUdBVCxFQUFBRCxRQTBEQSxPQXJEQU8sRUFBQU0sRUFBQUYsRUFHQUosRUFBQU8sRUFBQVIsRUFHQUMsRUFBQVEsRUFBQSxTQUFBZixFQUFBZ0IsRUFBQUMsR0FDQVYsRUFBQVcsRUFBQWxCLEVBQUFnQixJQUNBRyxPQUFBQyxlQUFBcEIsRUFBQWdCLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNWLEVBQUFnQixFQUFBLFNBQUF2QixHQUNBLG9CQUFBd0IsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQXBCLEVBQUF3QixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBcEIsRUFBQSxjQUFpRDBCLE9BQUEsS0FRakRuQixFQUFBb0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFB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T2lXLGVBQWV0VixLQUlKLG9CQUFYMUIsU0FDVEEsT0FBTzhWLEdBQUtBIiwiZmlsZSI6ImZ1bmN0aW9uLWFuYWx5dGljcy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImZ1bmN0aW9uLWFuYWx5dGljc1wiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJmdW5jdGlvbi1hbmFseXRpY3NcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiZnVuY3Rpb24tYW5hbHl0aWNzXCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyOSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBpc0J1ZmZlciA9IHJlcXVpcmUoJ2lzLWJ1ZmZlcicpO1xuXG4vKmdsb2JhbCB0b1N0cmluZzp0cnVlKi9cblxuLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3NcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gRm9ybURhdGEsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkge1xuICByZXR1cm4gKHR5cGVvZiBGb3JtRGF0YSAhPT0gJ3VuZGVmaW5lZCcpICYmICh2YWwgaW5zdGFuY2VvZiBGb3JtRGF0YSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlclZpZXcodmFsKSB7XG4gIHZhciByZXN1bHQ7XG4gIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykgJiYgKEFycmF5QnVmZmVyLmlzVmlldykpIHtcbiAgICByZXN1bHQgPSBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsKTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSAodmFsKSAmJiAodmFsLmJ1ZmZlcikgJiYgKHZhbC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcik7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyaW5nLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIE51bWJlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgTnVtYmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIERhdGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0RhdGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0ZpbGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZpbGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Jsb2IodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEJsb2JdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyZWFtKHZhbCkge1xuICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcztcbn1cblxuLyoqXG4gKiBUcmltIGV4Y2VzcyB3aGl0ZXNwYWNlIG9mZiB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbVxuICogQHJldHVybnMge1N0cmluZ30gVGhlIFN0cmluZyBmcmVlZCBvZiBleGNlc3Mgd2hpdGVzcGFjZVxuICovXG5mdW5jdGlvbiB0cmltKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqLywgJycpLnJlcGxhY2UoL1xccyokLywgJycpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudFxuICpcbiAqIFRoaXMgYWxsb3dzIGF4aW9zIHRvIHJ1biBpbiBhIHdlYiB3b3JrZXIsIGFuZCByZWFjdC1uYXRpdmUuXG4gKiBCb3RoIGVudmlyb25tZW50cyBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LCBidXQgbm90IGZ1bGx5IHN0YW5kYXJkIGdsb2JhbHMuXG4gKlxuICogd2ViIHdvcmtlcnM6XG4gKiAgdHlwZW9mIHdpbmRvdyAtPiB1bmRlZmluZWRcbiAqICB0eXBlb2YgZG9jdW1lbnQgLT4gdW5kZWZpbmVkXG4gKlxuICogcmVhY3QtbmF0aXZlOlxuICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdSZWFjdE5hdGl2ZSdcbiAqL1xuZnVuY3Rpb24gaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuICApO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKi9cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRXh0ZW5kcyBvYmplY3QgYSBieSBtdXRhYmx5IGFkZGluZyB0byBpdCB0aGUgcHJvcGVydGllcyBvZiBvYmplY3QgYi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkXG4gKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tXG4gKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBUaGUgb2JqZWN0IHRvIGJpbmQgZnVuY3Rpb24gdG9cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHJlc3VsdGluZyB2YWx1ZSBvZiBvYmplY3QgYVxuICovXG5mdW5jdGlvbiBleHRlbmQoYSwgYiwgdGhpc0FyZykge1xuICBmb3JFYWNoKGIsIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG4gICAgaWYgKHRoaXNBcmcgJiYgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYVtrZXldID0gYmluZCh2YWwsIHRoaXNBcmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhW2tleV0gPSB2YWw7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc0FycmF5OiBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyOiBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcjogaXNCdWZmZXIsXG4gIGlzRm9ybURhdGE6IGlzRm9ybURhdGEsXG4gIGlzQXJyYXlCdWZmZXJWaWV3OiBpc0FycmF5QnVmZmVyVmlldyxcbiAgaXNTdHJpbmc6IGlzU3RyaW5nLFxuICBpc051bWJlcjogaXNOdW1iZXIsXG4gIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxuICBpc0RhdGU6IGlzRGF0ZSxcbiAgaXNGaWxlOiBpc0ZpbGUsXG4gIGlzQmxvYjogaXNCbG9iLFxuICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxuICBpc1N0cmVhbTogaXNTdHJlYW0sXG4gIGlzVVJMU2VhcmNoUGFyYW1zOiBpc1VSTFNlYXJjaFBhcmFtcyxcbiAgaXNTdGFuZGFyZEJyb3dzZXJFbnY6IGlzU3RhbmRhcmRCcm93c2VyRW52LFxuICBmb3JFYWNoOiBmb3JFYWNoLFxuICBtZXJnZTogbWVyZ2UsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICB0cmltOiB0cmltXG59O1xuIiwiaW1wb3J0IFByb2dyZXNzUHJvbWlzZSBmcm9tICdwcm9ncmVzcy1wcm9taXNlJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgaHR0cGFkYXB0ZXIgZnJvbSAnYXhpb3MvbGliL2FkYXB0ZXJzL2h0dHAnO1xuaW1wb3J0IHhocmFkYXB0ZXIgZnJvbSAnYXhpb3MvbGliL2FkYXB0ZXJzL3hocic7XG5sZXQgX2luc3RhbmNlO1xuXG4vKipcbiAqIFJ1bm5lciByZXByZXNlbnRzIHRoZSBwcm9jZXNzIHdoaWNoIHdpbGwgc2NoZWR1bGUgYW5kIHJ1biBvcGVyYXRpb25zIG9mIHRoZSBwcm9jZXNzZXNcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5lciB7XG4gIC8qKlxuICAgKiBJbml0aWF0ZXMgdGhlIHJ1bm5lciBzaW5nbGV0b24gaW5zdGFuY2VcbiAgICogQHBhcmFtIGNvbmZpZ3VyYXRpb25zXG4gICAqL1xuICBzdGF0aWMgaW5pdGlhdGVSdW5uZXIoY29uZmlndXJhdGlvbnMpIHtcbiAgICBpZiAoIVJ1bm5lci5pbnN0YW5jZSkge1xuICAgICAgdGhpcy5jb25maWcgPSBjb25maWd1cmF0aW9ucztcbiAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgIF9pbnN0YW5jZSA9IHRoaXM7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgUnVubmVyIGluc3RhbmNlXG4gICAqIEByZXR1cm5zIHtSdW5uZXJ9XG4gICAqL1xuICBnZXQgaW5zdGFuY2UoKSB7XG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNvbmZpZ3VyYXRpb25cbiAgICogQHBhcmFtIGNvbmZpZ3VyYXRpb25zXG4gICAqL1xuICBzZXQgY29uZmlnKGNvbmZpZ3VyYXRpb25zKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWd1cmF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbmZpZ3VyYXRpb25zXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgZ2V0IGNvbmZpZygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWc7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBjYWxsYmFjayB0eXBlIGlzIGNhbGxlZCBgcmVzb2x2ZUNhbGxiYWNrYC5cbiAgICpcbiAgICogQGNhbGxiYWNrIHJlc29sdmVDYWxsYmFja1xuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2VSZXN1bHRcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoaXMgY2FsbGJhY2sgdHlwZSBpcyBjYWxsZWQgYHJlamVjdENhbGxiYWNrYC5cbiAgICpcbiAgICogQGNhbGxiYWNrIHJlamVjdENhbGxiYWNrXG4gICAqIEBwYXJhbSB7RXJyb3J9IGVycm9yXG4gICAqL1xuXG4gIC8qKlxuICAgKiBGZXRjaGVzIHRoZSBkYXRhIGZyb20gdGhlIGZldGNoZXJcbiAgICogQHBhcmFtIHtGZXRjaGVyfSBmZXRjaGVyXG4gICAqIEBwYXJhbSB7cmVzb2x2ZUNhbGxiYWNrfSByZXNvbHZlXG4gICAqIEBwYXJhbSB7cmVqZWN0Q2FsbGJhY2t9IHJlamVjdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2ZldGNoKGZldGNoZXIsIHJlc29sdmUsIHJlamVjdCkge1xuICAgIGlmICghX2luc3RhbmNlKSB7XG4gICAgICBsZXQgZXJyb3IgPSAnQ29uZmlncmF0aW9uIG5vdCBzZXQgcGxlYXNlIGNvbmZpZ3JlIGZ1bmN0aW9uICcgK1xuICAgICAgICAnYW5hbHl0aWNzIGVnIHtiYXNlVXJsOlwiZGhpc19iYXNlX3VybFwiLCB1c2VybmFtZTpcInVzZXJuYW1lXCIsICcgK1xuICAgICAgICAncGFzc3dvcmQ6XCJwYXNzd29yZFwifSc7XG5cbiAgICAgIHRocm93IEVycm9yKGVycm9yKTtcbiAgICB9XG4gICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgdXJsOiBfaW5zdGFuY2UuY29uZmlnLmJhc2VVcmwgKyBmZXRjaGVyLnVybCxcbiAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICBhZGFwdGVyOiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgPyBodHRwYWRhcHRlciA6IHhocmFkYXB0ZXJcbiAgICB9O1xuXG4gICAgaWYgKF9pbnN0YW5jZS5jb25maWcudXNlcm5hbWUgJiYgX2luc3RhbmNlLmNvbmZpZy5wYXNzd29yZCkge1xuICAgICAgY29uZmlnLmF1dGggPSB7XG4gICAgICAgIHVzZXJuYW1lOiBfaW5zdGFuY2UuY29uZmlnLnVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZDogX2luc3RhbmNlLmNvbmZpZy5wYXNzd29yZFxuICAgICAgfTtcbiAgICB9XG4gICAgYXhpb3MucmVxdWVzdChjb25maWcpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgIHJlc29sdmUoZmV0Y2hlci5wZXJmb3JtUG9zdFByb2Nlc3MocmVzdWx0cy5kYXRhKSk7XG4gICAgfSwgKGVycikgPT4ge1xuICAgICAgcmVqZWN0KGVycik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2hlcyBkYXRhIHJlbGF0ZWQgdG8gYSBmZXRjaGVyXG4gICAqIEBwYXJhbSB7RmV0Y2hlcn0gZmV0Y2hlclxuICAgKiBAcmV0dXJucyB7UHJvZ3Jlc3NQcm9taXNlfVxuICAgKi9cbiAgZ2V0UmVzdWx0cyhmZXRjaGVyKSB7XG4gICAgaWYgKGZldGNoZXIuX2ZldGNoZXJzKSB7IC8vIElmIGlzIGEgbXVsdGlmZXRjaGVyXG4gICAgICByZXR1cm4gdGhpcy5nZXRBbGxSZXN1bHRzKGZldGNoZXIpO1xuICAgIH1cbiAgICBsZXQgaGFzaGVkID0gZmV0Y2hlci5oYXNoKCk7XG5cbiAgICBpZiAoIV9pbnN0YW5jZS5jYWNoZVtoYXNoZWRdKSB7XG4gICAgICBfaW5zdGFuY2UuY2FjaGVbaGFzaGVkXSA9IG5ldyBQcm9ncmVzc1Byb21pc2UoXG4gICAgICAgIChyZXNvbHZlLCByZWplY3QsIHByb2dyZXNzKSA9PiB7XG4gICAgICAgICAgaWYgKGZldGNoZXIuaGFzRGVwZW5kZW5jaWVzKCkpIHtcbiAgICAgICAgICAgIGZldGNoZXJcbiAgICAgICAgICAgICAgLmdldERlcGVuZGVjeUZldGNoUmVzdWx0cygpXG4gICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBmZXRjaGVyLnBlcmZvcm1QcmVQcm9jZXNzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZmV0Y2goZmV0Y2hlciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VycnJycnJycnJycjonLCBlcnIpO1xuICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZmV0Y2goZmV0Y2hlciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBfaW5zdGFuY2UuY2FjaGVbaGFzaGVkXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaGVzIGRhdGEgZm9yIG11bHRpcGxlIGZldGNoZXJzXG4gICAqIEBwYXJhbSB7TXVsdGlGZXRjaGVyfSBtdWx0aWZldGNoZXJcbiAgICogQHJldHVybnMge1Byb2dyZXNzUHJvbWlzZX1cbiAgICovXG4gIGdldEFsbFJlc3VsdHMobXVsdGlmZXRjaGVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9ncmVzc1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCwgcHJvZ3Jlc3MpID0+IHtcbiAgICAgIGNvbnN0IHByb21pc2VzID0gbXVsdGlmZXRjaGVyLmZldGNoZXJzLm1hcCgoZmV0Y2hlcikgPT4gKG5ldyBSdW5uZXIoKSkuZ2V0UmVzdWx0cyhmZXRjaGVyKSk7XG5cbiAgICAgIHJldHVybiBQcm9ncmVzc1Byb21pc2UuYWxsKHByb21pc2VzKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgIHJlc29sdmUobXVsdGlmZXRjaGVyLnBlcmZvcm1Qb3N0UHJvY2VzcyhyZXN1bHRzKSk7XG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHNldHRsZSA9IHJlcXVpcmUoJy4vLi4vY29yZS9zZXR0bGUnKTtcbnZhciBidWlsZFVSTCA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9idWlsZFVSTCcpO1xudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9wYXJzZUhlYWRlcnMnKTtcbnZhciBpc1VSTFNhbWVPcmlnaW4gPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luJyk7XG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuLi9jb3JlL2NyZWF0ZUVycm9yJyk7XG52YXIgYnRvYSA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuYnRvYSAmJiB3aW5kb3cuYnRvYS5iaW5kKHdpbmRvdykpIHx8IHJlcXVpcmUoJy4vLi4vaGVscGVycy9idG9hJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBjb25maWcuZGF0YTtcbiAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcblxuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKHJlcXVlc3REYXRhKSkge1xuICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzWydDb250ZW50LVR5cGUnXTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxuICAgIH1cblxuICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgdmFyIGxvYWRFdmVudCA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnO1xuICAgIHZhciB4RG9tYWluID0gZmFsc2U7XG5cbiAgICAvLyBGb3IgSUUgOC85IENPUlMgc3VwcG9ydFxuICAgIC8vIE9ubHkgc3VwcG9ydHMgUE9TVCBhbmQgR0VUIGNhbGxzIGFuZCBkb2Vzbid0IHJldHVybnMgdGhlIHJlc3BvbnNlIGhlYWRlcnMuXG4gICAgLy8gRE9OJ1QgZG8gdGhpcyBmb3IgdGVzdGluZyBiL2MgWE1MSHR0cFJlcXVlc3QgaXMgbW9ja2VkLCBub3QgWERvbWFpblJlcXVlc3QuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcgJiZcbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgd2luZG93LlhEb21haW5SZXF1ZXN0ICYmICEoJ3dpdGhDcmVkZW50aWFscycgaW4gcmVxdWVzdCkgJiZcbiAgICAgICAgIWlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkge1xuICAgICAgcmVxdWVzdCA9IG5ldyB3aW5kb3cuWERvbWFpblJlcXVlc3QoKTtcbiAgICAgIGxvYWRFdmVudCA9ICdvbmxvYWQnO1xuICAgICAgeERvbWFpbiA9IHRydWU7XG4gICAgICByZXF1ZXN0Lm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiBoYW5kbGVQcm9ncmVzcygpIHt9O1xuICAgICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge307XG4gICAgfVxuXG4gICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICAgIGlmIChjb25maWcuYXV0aCkge1xuICAgICAgdmFyIHVzZXJuYW1lID0gY29uZmlnLmF1dGgudXNlcm5hbWUgfHwgJyc7XG4gICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCB8fCAnJztcbiAgICAgIHJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG4gICAgfVxuXG4gICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTtcblxuICAgIC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TXG4gICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlXG4gICAgcmVxdWVzdFtsb2FkRXZlbnRdID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCB8fCAocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0ICYmICF4RG9tYWluKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgIC8vIFdpdGggb25lIGV4Y2VwdGlvbjogcmVxdWVzdCB0aGF0IHVzaW5nIGZpbGU6IHByb3RvY29sLCBtb3N0IGJyb3dzZXJzXG4gICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFjb25maWcucmVzcG9uc2VUeXBlIHx8IGNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHJlcXVlc3QucmVzcG9uc2VUZXh0IDogcmVxdWVzdC5yZXNwb25zZTtcbiAgICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICAvLyBJRSBzZW5kcyAxMjIzIGluc3RlYWQgb2YgMjA0IChodHRwczovL2dpdGh1Yi5jb20vYXhpb3MvYXhpb3MvaXNzdWVzLzIwMSlcbiAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/ICdObyBDb250ZW50JyA6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9yc1xuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuICAgICAgLy8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyXG4gICAgICAvLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3JcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZywgbnVsbCwgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIHRpbWVvdXRcbiAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7XG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ3RpbWVvdXQgb2YgJyArIGNvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJyxcbiAgICAgICAgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gICAgLy8gU3BlY2lmaWNhbGx5IG5vdCBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIsIG9yIHJlYWN0LW5hdGl2ZS5cbiAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuICAgICAgdmFyIGNvb2tpZXMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29va2llcycpO1xuXG4gICAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAgIHZhciB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCkpICYmIGNvbmZpZy54c3JmQ29va2llTmFtZSA/XG4gICAgICAgICAgY29va2llcy5yZWFkKGNvbmZpZy54c3JmQ29va2llTmFtZSkgOlxuICAgICAgICAgIHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHhzcmZWYWx1ZSkge1xuICAgICAgICByZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdID0geHNyZlZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG4gICAgaWYgKCdzZXRSZXF1ZXN0SGVhZGVyJyBpbiByZXF1ZXN0KSB7XG4gICAgICB1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLCBmdW5jdGlvbiBzZXRSZXF1ZXN0SGVhZGVyKHZhbCwga2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykge1xuICAgICAgICAgIC8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGhlYWRlciB0byB0aGUgcmVxdWVzdFxuICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFkZCB3aXRoQ3JlZGVudGlhbHMgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoY29uZmlnLndpdGhDcmVkZW50aWFscykge1xuICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEFkZCByZXNwb25zZVR5cGUgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBFeHBlY3RlZCBET01FeGNlcHRpb24gdGhyb3duIGJ5IGJyb3dzZXJzIG5vdCBjb21wYXRpYmxlIFhNTEh0dHBSZXF1ZXN0IExldmVsIDIuXG4gICAgICAgIC8vIEJ1dCwgdGhpcyBjYW4gYmUgc3VwcHJlc3NlZCBmb3IgJ2pzb24nIHR5cGUgYXMgaXQgY2FuIGJlIHBhcnNlZCBieSBkZWZhdWx0ICd0cmFuc2Zvcm1SZXNwb25zZScgZnVuY3Rpb24uXG4gICAgICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHByb2dyZXNzIGlmIG5lZWRlZFxuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25VcGxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJyAmJiByZXF1ZXN0LnVwbG9hZCkge1xuICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25VcGxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuICAgICAgY29uZmlnLmNhbmNlbFRva2VuLnByb21pc2UudGhlbihmdW5jdGlvbiBvbkNhbmNlbGVkKGNhbmNlbCkge1xuICAgICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgIHJlamVjdChjYW5jZWwpO1xuICAgICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3REYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlcXVlc3REYXRhID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTZW5kIHRoZSByZXF1ZXN0XG4gICAgcmVxdWVzdC5zZW5kKHJlcXVlc3REYXRhKTtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmFsbGJhY2sgZm9yIGVuZ2luZXMgdGhhdCBkb24ndCBzdXBwb3J0IFN5bWJvbFxuY29uc3QgTElTVEVORVJTID0gU3ltYm9sID8gU3ltYm9sKCkgOiAnX19saXN0ZW5lcnMnO1xuXG5jbGFzcyBQcm9ncmVzc1Byb21pc2UgZXh0ZW5kcyBQcm9taXNlIHtcbiAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICBzdXBlcigocmVzb2x2ZSwgcmVqZWN0KSA9PiBleGVjdXRvcihyZXNvbHZlLCByZWplY3QsXG4gICAgICAvLyBQYXNzIG1ldGhvZCBmb3IgcGFzc2luZyBwcm9ncmVzcyB0byBsaXN0ZW5lclxuICAgICAgdmFsdWUgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB0aGlzW0xJU1RFTkVSU10uZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcih2YWx1ZSkpO1xuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIHRoaXNbTElTVEVORVJTXSA9IFtdO1xuICB9XG4gIHByb2dyZXNzKGhhbmRsZXIpIHtcbiAgICBpZih0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgIHRocm93IG5ldyBFcnJvcignUFJPR1JFU1NfUkVRVUlSRVNfRlVOQ1RJT04nKTtcbiAgICB0aGlzW0xJU1RFTkVSU10ucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzdGF0aWMgYWxsKHByb21pc2VzKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IG5ldyBBcnJheShwcm9taXNlcy5sZW5ndGgpO1xuICAgIGNvbnN0IGxlbmd0aCA9IHByb21pc2VzLmxlbmd0aDtcbiAgICBsZXQgcmVzb2x2ZUNvdW50ID0gMDtcbiAgICByZXR1cm4gbmV3IFByb2dyZXNzUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0LCBwcm9ncmVzcykgPT4ge1xuICAgICAgcHJvbWlzZXMuZm9yRWFjaCgocHJvbWlzZSwgaW5kZXgpID0+IHtcbiAgICAgICAgcHJvbWlzZS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgcmVzdWx0c1tpbmRleF0gPSByZXN1bHQ7XG4gICAgICAgICAgcmVzdWx0cy5wcm9wb3J0aW9uID0gKytyZXNvbHZlQ291bnQgLyBsZW5ndGg7XG4gICAgICAgICAgcHJvZ3Jlc3MocmVzdWx0cyk7XG4gICAgICAgICAgaWYocmVzb2x2ZUNvdW50ID09PSBsZW5ndGgpIHJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgIH0pLmNhdGNoKHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgc2VxdWVuY2UoaW5wdXRzLCBoYW5kbGVyKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGNvbnN0IGxlbmd0aCA9IGlucHV0cy5sZW5ndGg7XG4gICAgbGV0IHJlc29sdmVDb3VudCA9IDA7XG4gICAgcmV0dXJuIG5ldyBQcm9ncmVzc1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCwgcHJvZ3Jlc3MpID0+IHtcbiAgICAgIGZ1bmN0aW9uIGludm9rZU5leHQoKSB7XG4gICAgICAgIGhhbmRsZXIuY2FsbChudWxsLCBpbnB1dHNbcmVzdWx0cy5sZW5ndGhdKVxuICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgIHJlc3VsdHMucHJvcG9ydGlvbiA9ICsrcmVzb2x2ZUNvdW50IC8gbGVuZ3RoO1xuICAgICAgICAgICAgcHJvZ3Jlc3MocmVzdWx0cyk7XG4gICAgICAgICAgICBpZihyZXN1bHRzLmxlbmd0aCA9PT0gbGVuZ3RoKSByZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgZWxzZSBpbnZva2VOZXh0KCk7XG4gICAgICAgICAgfSkuY2F0Y2gocmVqZWN0KTs7XG4gICAgICB9XG4gICAgICBpbnZva2VOZXh0KCk7XG4gICAgfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQcm9ncmVzc1Byb21pc2U7XG5cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIG5vcm1hbGl6ZUhlYWRlck5hbWUgPSByZXF1aXJlKCcuL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZScpO1xuXG52YXIgREVGQVVMVF9DT05URU5UX1RZUEUgPSB7XG4gICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xufTtcblxuZnVuY3Rpb24gc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsIHZhbHVlKSB7XG4gIGlmICghdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVycykgJiYgdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVyc1snQ29udGVudC1UeXBlJ10pKSB7XG4gICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0QWRhcHRlcigpIHtcbiAgdmFyIGFkYXB0ZXI7XG4gIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gRm9yIGJyb3dzZXJzIHVzZSBYSFIgYWRhcHRlclxuICAgIGFkYXB0ZXIgPSByZXF1aXJlKCcuL2FkYXB0ZXJzL3hocicpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBub2RlIHVzZSBIVFRQIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy9odHRwJyk7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXI7XG59XG5cbnZhciBkZWZhdWx0cyA9IHtcbiAgYWRhcHRlcjogZ2V0RGVmYXVsdEFkYXB0ZXIoKSxcblxuICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG4gICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7XG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsgLyogSWdub3JlICovIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIC8qKlxuICAgKiBBIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIGFib3J0IGEgcmVxdWVzdC4gSWYgc2V0IHRvIDAgKGRlZmF1bHQpIGFcbiAgICogdGltZW91dCBpcyBub3QgY3JlYXRlZC5cbiAgICovXG4gIHRpbWVvdXQ6IDAsXG5cbiAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcbiAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuXG4gIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG4gIH1cbn07XG5cbmRlZmF1bHRzLmhlYWRlcnMgPSB7XG4gIGNvbW1vbjoge1xuICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGVuaGFuY2VFcnJvciA9IHJlcXVpcmUoJy4vZW5oYW5jZUVycm9yJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2UsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICByZXR1cm4gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl9fQ0FOQ0VMX18pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBBIGBDYW5jZWxgIGlzIGFuIG9iamVjdCB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9wZXJhdGlvbiBpcyBjYW5jZWxlZC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsKG1lc3NhZ2UpIHtcbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbn1cblxuQ2FuY2VsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gJ0NhbmNlbCcgKyAodGhpcy5tZXNzYWdlID8gJzogJyArIHRoaXMubWVzc2FnZSA6ICcnKTtcbn07XG5cbkNhbmNlbC5wcm90b3R5cGUuX19DQU5DRUxfXyA9IHRydWU7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FuY2VsO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9heGlvcycpOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xudmFyIEF4aW9zID0gcmVxdWlyZSgnLi9jb3JlL0F4aW9zJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqIEByZXR1cm4ge0F4aW9zfSBBIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKSB7XG4gIHZhciBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuICB2YXIgaW5zdGFuY2UgPSBiaW5kKEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIEF4aW9zLnByb3RvdHlwZSwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBjb250ZXh0IHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgY29udGV4dCk7XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG4vLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWRcbnZhciBheGlvcyA9IGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTtcblxuLy8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlXG5heGlvcy5BeGlvcyA9IEF4aW9zO1xuXG4vLyBGYWN0b3J5IGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2VzXG5heGlvcy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcbiAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKHV0aWxzLm1lcmdlKGRlZmF1bHRzLCBpbnN0YW5jZUNvbmZpZykpO1xufTtcblxuLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5heGlvcy5DYW5jZWwgPSByZXF1aXJlKCcuL2NhbmNlbC9DYW5jZWwnKTtcbmF4aW9zLkNhbmNlbFRva2VuID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsVG9rZW4nKTtcbmF4aW9zLmlzQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvaXNDYW5jZWwnKTtcblxuLy8gRXhwb3NlIGFsbC9zcHJlYWRcbmF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufTtcbmF4aW9zLnNwcmVhZCA9IHJlcXVpcmUoJy4vaGVscGVycy9zcHJlYWQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBheGlvcztcblxuLy8gQWxsb3cgdXNlIG9mIGRlZmF1bHQgaW1wb3J0IHN5bnRheCBpbiBUeXBlU2NyaXB0XG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gYXhpb3M7XG4iLCIvKiFcbiAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaXMgYSBCdWZmZXJcbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG5cbi8vIFRoZSBfaXNCdWZmZXIgY2hlY2sgaXMgZm9yIFNhZmFyaSA1LTcgc3VwcG9ydCwgYmVjYXVzZSBpdCdzIG1pc3Npbmdcbi8vIE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IuIFJlbW92ZSB0aGlzIGV2ZW50dWFsbHlcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICE9IG51bGwgJiYgKGlzQnVmZmVyKG9iaikgfHwgaXNTbG93QnVmZmVyKG9iaikgfHwgISFvYmouX2lzQnVmZmVyKVxufVxuXG5mdW5jdGlvbiBpc0J1ZmZlciAob2JqKSB7XG4gIHJldHVybiAhIW9iai5jb25zdHJ1Y3RvciAmJiB0eXBlb2Ygb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihvYmopXG59XG5cbi8vIEZvciBOb2RlIHYwLjEwIHN1cHBvcnQuIFJlbW92ZSB0aGlzIGV2ZW50dWFsbHkuXG5mdW5jdGlvbiBpc1Nsb3dCdWZmZXIgKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iai5yZWFkRmxvYXRMRSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqLnNsaWNlID09PSAnZnVuY3Rpb24nICYmIGlzQnVmZmVyKG9iai5zbGljZSgwLCAwKSlcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi8uLi9kZWZhdWx0cycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIEludGVyY2VwdG9yTWFuYWdlciA9IHJlcXVpcmUoJy4vSW50ZXJjZXB0b3JNYW5hZ2VyJyk7XG52YXIgZGlzcGF0Y2hSZXF1ZXN0ID0gcmVxdWlyZSgnLi9kaXNwYXRjaFJlcXVlc3QnKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHtcbiAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnO1xuICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksXG4gICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKVxuICB9O1xufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuICovXG5BeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJXG4gIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgIGNvbmZpZyA9IHV0aWxzLm1lcmdlKHtcbiAgICAgIHVybDogYXJndW1lbnRzWzBdXG4gICAgfSwgYXJndW1lbnRzWzFdKTtcbiAgfVxuXG4gIGNvbmZpZyA9IHV0aWxzLm1lcmdlKGRlZmF1bHRzLCB7bWV0aG9kOiAnZ2V0J30sIHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7XG4gIGNvbmZpZy5tZXRob2QgPSBjb25maWcubWV0aG9kLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gSG9vayB1cCBpbnRlcmNlcHRvcnMgbWlkZGxld2FyZVxuICB2YXIgY2hhaW4gPSBbZGlzcGF0Y2hSZXF1ZXN0LCB1bmRlZmluZWRdO1xuICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpO1xuXG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaChmdW5jdGlvbiB1bnNoaWZ0UmVxdWVzdEludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgIGNoYWluLnVuc2hpZnQoaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgY2hhaW4ucHVzaChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgd2hpbGUgKGNoYWluLmxlbmd0aCkge1xuICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oY2hhaW4uc2hpZnQoKSwgY2hhaW4uc2hpZnQoKSk7XG4gIH1cblxuICByZXR1cm4gcHJvbWlzZTtcbn07XG5cbi8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kc1xudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdvcHRpb25zJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybFxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXhpb3M7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCBub3JtYWxpemVkTmFtZSkge1xuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uIHByb2Nlc3NIZWFkZXIodmFsdWUsIG5hbWUpIHtcbiAgICBpZiAobmFtZSAhPT0gbm9ybWFsaXplZE5hbWUgJiYgbmFtZS50b1VwcGVyQ2FzZSgpID09PSBub3JtYWxpemVkTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICBoZWFkZXJzW25vcm1hbGl6ZWROYW1lXSA9IHZhbHVlO1xuICAgICAgZGVsZXRlIGhlYWRlcnNbbmFtZV07XG4gICAgfVxuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJy4vY3JlYXRlRXJyb3InKTtcblxuLyoqXG4gKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkge1xuICB2YXIgdmFsaWRhdGVTdGF0dXMgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7XG4gIC8vIE5vdGU6IHN0YXR1cyBpcyBub3QgZXhwb3NlZCBieSBYRG9tYWluUmVxdWVzdFxuICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCAhdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICB9IGVsc2Uge1xuICAgIHJlamVjdChjcmVhdGVFcnJvcihcbiAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG4gICAgICByZXNwb25zZS5jb25maWcsXG4gICAgICBudWxsLFxuICAgICAgcmVzcG9uc2UucmVxdWVzdCxcbiAgICAgIHJlc3BvbnNlXG4gICAgKSk7XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBUaGUgZXJyb3IgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgZXJyb3IuY29uZmlnID0gY29uZmlnO1xuICBpZiAoY29kZSkge1xuICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICB9XG4gIGVycm9yLnJlcXVlc3QgPSByZXF1ZXN0O1xuICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICByZXR1cm4gZXJyb3I7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuICAgIHJlcGxhY2UoLyU0MC9naSwgJ0AnKS5cbiAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgcmVwbGFjZSgvJTI0L2csICckJykuXG4gICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cbiAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgcGFyYW1zU2VyaWFsaXplcikge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgdmFyIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIGlmIChwYXJhbXNTZXJpYWxpemVyKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTtcbiAgfSBlbHNlIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtcy50b1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgdXRpbHMuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkge1xuICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh1dGlscy5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAga2V5ID0ga2V5ICsgJ1tdJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbCA9IFt2YWxdO1xuICAgICAgfVxuXG4gICAgICB1dGlscy5mb3JFYWNoKHZhbCwgZnVuY3Rpb24gcGFyc2VWYWx1ZSh2KSB7XG4gICAgICAgIGlmICh1dGlscy5pc0RhdGUodikpIHtcbiAgICAgICAgICB2ID0gdi50b0lTT1N0cmluZygpO1xuICAgICAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KHYpKSB7XG4gICAgICAgICAgdiA9IEpTT04uc3RyaW5naWZ5KHYpO1xuICAgICAgICB9XG4gICAgICAgIHBhcnRzLnB1c2goZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodikpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFydHMuam9pbignJicpO1xuICB9XG5cbiAgaWYgKHNlcmlhbGl6ZWRQYXJhbXMpIHtcbiAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vLyBIZWFkZXJzIHdob3NlIGR1cGxpY2F0ZXMgYXJlIGlnbm9yZWQgYnkgbm9kZVxuLy8gYy5mLiBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVyc1xudmFyIGlnbm9yZUR1cGxpY2F0ZU9mID0gW1xuICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuICAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsXG4gICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJyxcbiAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcbl07XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIGBgYFxuICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVRcbiAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxuICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWRcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHt9O1xuICB2YXIga2V5O1xuICB2YXIgdmFsO1xuICB2YXIgaTtcblxuICBpZiAoIWhlYWRlcnMpIHsgcmV0dXJuIHBhcnNlZDsgfVxuXG4gIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCwgaSkpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgaWYgKHBhcnNlZFtrZXldICYmIGlnbm9yZUR1cGxpY2F0ZU9mLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuICAgICAgICBwYXJzZWRba2V5XSA9IChwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldIDogW10pLmNvbmNhdChbdmFsXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBoYXZlIGZ1bGwgc3VwcG9ydCBvZiB0aGUgQVBJcyBuZWVkZWQgdG8gdGVzdFxuICAvLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi5cbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgdmFyIHVybFBhcnNpbmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIHZhciBvcmlnaW5VUkw7XG5cbiAgICAvKipcbiAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50c1xuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWRcbiAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgKi9cbiAgICBmdW5jdGlvbiByZXNvbHZlVVJMKHVybCkge1xuICAgICAgdmFyIGhyZWYgPSB1cmw7XG5cbiAgICAgIGlmIChtc2llKSB7XG4gICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXNcbiAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG4gICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuICAgICAgfVxuXG4gICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblxuICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcbiAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcbiAgICAgICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG4gICAgICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG4gICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cbiAgICAgICAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcbiAgICAgICAgICAgICAgICAgICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXG4gICAgICB9O1xuICAgIH1cblxuICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgLyoqXG4gICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbihyZXF1ZXN0VVJMKSB7XG4gICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuICAgICAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJlxuICAgICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4oKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9KSgpXG4pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBidG9hIHBvbHlmaWxsIGZvciBJRTwxMCBjb3VydGVzeSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWRjaGFtYmVycy9CYXNlNjQuanNcblxudmFyIGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcblxuZnVuY3Rpb24gRSgpIHtcbiAgdGhpcy5tZXNzYWdlID0gJ1N0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3Rlcic7XG59XG5FLnByb3RvdHlwZSA9IG5ldyBFcnJvcjtcbkUucHJvdG90eXBlLmNvZGUgPSA1O1xuRS5wcm90b3R5cGUubmFtZSA9ICdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InO1xuXG5mdW5jdGlvbiBidG9hKGlucHV0KSB7XG4gIHZhciBzdHIgPSBTdHJpbmcoaW5wdXQpO1xuICB2YXIgb3V0cHV0ID0gJyc7XG4gIGZvciAoXG4gICAgLy8gaW5pdGlhbGl6ZSByZXN1bHQgYW5kIGNvdW50ZXJcbiAgICB2YXIgYmxvY2ssIGNoYXJDb2RlLCBpZHggPSAwLCBtYXAgPSBjaGFycztcbiAgICAvLyBpZiB0aGUgbmV4dCBzdHIgaW5kZXggZG9lcyBub3QgZXhpc3Q6XG4gICAgLy8gICBjaGFuZ2UgdGhlIG1hcHBpbmcgdGFibGUgdG8gXCI9XCJcbiAgICAvLyAgIGNoZWNrIGlmIGQgaGFzIG5vIGZyYWN0aW9uYWwgZGlnaXRzXG4gICAgc3RyLmNoYXJBdChpZHggfCAwKSB8fCAobWFwID0gJz0nLCBpZHggJSAxKTtcbiAgICAvLyBcIjggLSBpZHggJSAxICogOFwiIGdlbmVyYXRlcyB0aGUgc2VxdWVuY2UgMiwgNCwgNiwgOFxuICAgIG91dHB1dCArPSBtYXAuY2hhckF0KDYzICYgYmxvY2sgPj4gOCAtIGlkeCAlIDEgKiA4KVxuICApIHtcbiAgICBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGlkeCArPSAzIC8gNCk7XG4gICAgaWYgKGNoYXJDb2RlID4gMHhGRikge1xuICAgICAgdGhyb3cgbmV3IEUoKTtcbiAgICB9XG4gICAgYmxvY2sgPSBibG9jayA8PCA4IHwgY2hhckNvZGU7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBidG9hO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuICAgICAgICB2YXIgY29va2llID0gW107XG4gICAgICAgIGNvb2tpZS5wdXNoKG5hbWUgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcblxuICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcocGF0aCkpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ3NlY3VyZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oJzsgJyk7XG4gICAgICB9LFxuXG4gICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgICAgcmV0dXJuIChtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcbiAgICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LFxuICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZCgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgfTtcbiAgfSkoKVxuKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5mdW5jdGlvbiBJbnRlcmNlcHRvck1hbmFnZXIoKSB7XG4gIHRoaXMuaGFuZGxlcnMgPSBbXTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgaW50ZXJjZXB0b3IgdG8gdGhlIHN0YWNrXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHRoZW5gIGZvciBhIGBQcm9taXNlYFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0ZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgcmVqZWN0YCBmb3IgYSBgUHJvbWlzZWBcbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IEFuIElEIHVzZWQgdG8gcmVtb3ZlIGludGVyY2VwdG9yIGxhdGVyXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpIHtcbiAgdGhpcy5oYW5kbGVycy5wdXNoKHtcbiAgICBmdWxmaWxsZWQ6IGZ1bGZpbGxlZCxcbiAgICByZWplY3RlZDogcmVqZWN0ZWRcbiAgfSk7XG4gIHJldHVybiB0aGlzLmhhbmRsZXJzLmxlbmd0aCAtIDE7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpZCBUaGUgSUQgdGhhdCB3YXMgcmV0dXJuZWQgYnkgYHVzZWBcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5lamVjdCA9IGZ1bmN0aW9uIGVqZWN0KGlkKSB7XG4gIGlmICh0aGlzLmhhbmRsZXJzW2lkXSkge1xuICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYWxsIHRoZSByZWdpc3RlcmVkIGludGVyY2VwdG9yc1xuICpcbiAqIFRoaXMgbWV0aG9kIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIHNraXBwaW5nIG92ZXIgYW55XG4gKiBpbnRlcmNlcHRvcnMgdGhhdCBtYXkgaGF2ZSBiZWNvbWUgYG51bGxgIGNhbGxpbmcgYGVqZWN0YC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpbnRlcmNlcHRvclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZuKSB7XG4gIHV0aWxzLmZvckVhY2godGhpcy5oYW5kbGVycywgZnVuY3Rpb24gZm9yRWFjaEhhbmRsZXIoaCkge1xuICAgIGlmIChoICE9PSBudWxsKSB7XG4gICAgICBmbihoKTtcbiAgICB9XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbnRlcmNlcHRvck1hbmFnZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciB0cmFuc2Zvcm1EYXRhID0gcmVxdWlyZSgnLi90cmFuc2Zvcm1EYXRhJyk7XG52YXIgaXNDYW5jZWwgPSByZXF1aXJlKCcuLi9jYW5jZWwvaXNDYW5jZWwnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4uL2RlZmF1bHRzJyk7XG52YXIgaXNBYnNvbHV0ZVVSTCA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9pc0Fic29sdXRlVVJMJyk7XG52YXIgY29tYmluZVVSTHMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29tYmluZVVSTHMnKTtcblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5mdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZykge1xuICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgY29uZmlnLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKTtcbiAgfVxufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkaXNwYXRjaFJlcXVlc3QoY29uZmlnKSB7XG4gIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAvLyBTdXBwb3J0IGJhc2VVUkwgY29uZmlnXG4gIGlmIChjb25maWcuYmFzZVVSTCAmJiAhaXNBYnNvbHV0ZVVSTChjb25maWcudXJsKSkge1xuICAgIGNvbmZpZy51cmwgPSBjb21iaW5lVVJMcyhjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCk7XG4gIH1cblxuICAvLyBFbnN1cmUgaGVhZGVycyBleGlzdFxuICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuXG4gIC8vIFRyYW5zZm9ybSByZXF1ZXN0IGRhdGFcbiAgY29uZmlnLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgIGNvbmZpZy5kYXRhLFxuICAgIGNvbmZpZy5oZWFkZXJzLFxuICAgIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0XG4gICk7XG5cbiAgLy8gRmxhdHRlbiBoZWFkZXJzXG4gIGNvbmZpZy5oZWFkZXJzID0gdXRpbHMubWVyZ2UoXG4gICAgY29uZmlnLmhlYWRlcnMuY29tbW9uIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzW2NvbmZpZy5tZXRob2RdIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzIHx8IHt9XG4gICk7XG5cbiAgdXRpbHMuZm9yRWFjaChcbiAgICBbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSxcbiAgICBmdW5jdGlvbiBjbGVhbkhlYWRlckNvbmZpZyhtZXRob2QpIHtcbiAgICAgIGRlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdO1xuICAgIH1cbiAgKTtcblxuICB2YXIgYWRhcHRlciA9IGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXI7XG5cbiAgcmV0dXJuIGFkYXB0ZXIoY29uZmlnKS50aGVuKGZ1bmN0aW9uIG9uQWRhcHRlclJlc29sdXRpb24ocmVzcG9uc2UpIHtcbiAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgICAgcmVzcG9uc2UuZGF0YSxcbiAgICAgIHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LCBmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKSB7XG4gICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG4gICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEsXG4gICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGRhdGEgVGhlIGRhdGEgdG8gYmUgdHJhbnNmb3JtZWRcbiAqIEBwYXJhbSB7QXJyYXl9IGhlYWRlcnMgVGhlIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0IG9yIHJlc3BvbnNlXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBmbnMpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcbiAgICBkYXRhID0gZm4oZGF0YSwgaGVhZGVycyk7XG4gIH0pO1xuXG4gIHJldHVybiBkYXRhO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG4gIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cbiAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG4gIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuICByZXR1cm4gL14oW2Etel1bYS16XFxkXFwrXFwtXFwuXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHtcbiAgcmV0dXJuIHJlbGF0aXZlVVJMXG4gICAgPyBiYXNlVVJMLnJlcGxhY2UoL1xcLyskLywgJycpICsgJy8nICsgcmVsYXRpdmVVUkwucmVwbGFjZSgvXlxcLysvLCAnJylcbiAgICA6IGJhc2VVUkw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2FuY2VsID0gcmVxdWlyZSgnLi9DYW5jZWwnKTtcblxuLyoqXG4gKiBBIGBDYW5jZWxUb2tlbmAgaXMgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVxdWVzdCBjYW5jZWxsYXRpb24gb2YgYW4gb3BlcmF0aW9uLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZXhlY3V0b3IgVGhlIGV4ZWN1dG9yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBDYW5jZWxUb2tlbihleGVjdXRvcikge1xuICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICB9XG5cbiAgdmFyIHJlc29sdmVQcm9taXNlO1xuICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiBwcm9taXNlRXhlY3V0b3IocmVzb2x2ZSkge1xuICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgfSk7XG5cbiAgdmFyIHRva2VuID0gdGhpcztcbiAgZXhlY3V0b3IoZnVuY3Rpb24gY2FuY2VsKG1lc3NhZ2UpIHtcbiAgICBpZiAodG9rZW4ucmVhc29uKSB7XG4gICAgICAvLyBDYW5jZWxsYXRpb24gaGFzIGFscmVhZHkgYmVlbiByZXF1ZXN0ZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0b2tlbi5yZWFzb24gPSBuZXcgQ2FuY2VsKG1lc3NhZ2UpO1xuICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG4gIH0pO1xufVxuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbkNhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkID0gZnVuY3Rpb24gdGhyb3dJZlJlcXVlc3RlZCgpIHtcbiAgaWYgKHRoaXMucmVhc29uKSB7XG4gICAgdGhyb3cgdGhpcy5yZWFzb247XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG5ldyBgQ2FuY2VsVG9rZW5gIGFuZCBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLFxuICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC5cbiAqL1xuQ2FuY2VsVG9rZW4uc291cmNlID0gZnVuY3Rpb24gc291cmNlKCkge1xuICB2YXIgY2FuY2VsO1xuICB2YXIgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykge1xuICAgIGNhbmNlbCA9IGM7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHRva2VuOiB0b2tlbixcbiAgICBjYW5jZWw6IGNhbmNlbFxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWxUb2tlbjtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuICpcbiAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG4gKlxuICogIGBgYGpzXG4gKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gKiAgYGBgXG4gKlxuICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG4gKlxuICogIGBgYGpzXG4gKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3ByZWFkKGNhbGxiYWNrKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKGFycikge1xuICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpO1xuICB9O1xufTtcbiIsIi8qKlxuICogVGhpcyBpcyB0aGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb2Nlc3NvclxuICovXG5leHBvcnQgY2xhc3MgUHJvY2VzcyB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgcHJvY2Vzc29yXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wb3N0UHJvY2Vzc29ycyA9IFtdO1xuICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gW107XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHByb2Nlc3NvciBoYXMgZGVwZW5kZW5jaWVzXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIEJvb2xlYW4gdmFsdWUgb2YgdGhlIHJlc3VsdFxuICAgKi9cbiAgaGFzRGVwZW5kZW5jaWVzKCkge1xuICAgIHJldHVybiB0aGlzLmRlcGVuZGVuY2llcy5sZW5ndGggPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgZGVwZW5kZW5jeSB0byB0aGUgcHJvY2Vzc29yXG4gICAqIEBwYXJhbSB7RGVwZW5kZW5jeX0gZGVwZW5kZW5jeSAtIFRoZVxuICAgKiBAZGVwcmVjYXRlZCBVc2UgYWRkUHJlUHJvY2Vzc1xuICAgKiBAcmV0dXJucyB7UHJvY2Vzc31cbiAgICovXG4gIHByZVByb2Nlc3MoZGVwZW5kZW5jeSkge1xuICAgIHRoaXMuZGVwZW5kZW5jaWVzLnB1c2goZGVwZW5kZW5jeSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBkZXBlbmRlbmN5IHRvIHRoZSBwcm9jZXNzb3JcbiAgICogQHBhcmFtIHtEZXBlbmRlbmN5fSBkZXBlbmRlbmN5XG4gICAqIEByZXR1cm5zIHtQcm9jZXNzfVxuICAgKi9cbiAgYWRkUHJlUHJvY2VzcyhkZXBlbmRlbmN5KSB7XG4gICAgdGhpcy5kZXBlbmRlbmNpZXMucHVzaChkZXBlbmRlbmN5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGNhbGxiYWNrIHByb2Nlc3MgdGhlIG91dHB1dCBwcm9jZXNzXG4gICAqIEBwYXJhbSBjYWxsYmFja1xuICAgKiBAZGVwcmVjYXRlZCBVc2UgYWRkUG9zdFByb2Nlc3NcbiAgICogQHJldHVybnMge1Byb2Nlc3N9XG4gICAqL1xuICBwb3N0UHJvY2VzcyhjYWxsYmFjaykge1xuICAgIHRoaXMucG9zdFByb2Nlc3NvcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBjYWxsYmFjayBwcm9jZXNzIHRoZSBvdXRwdXQgcHJvY2Vzc1xuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICogQHJldHVybnMge1Byb2Nlc3N9XG4gICAqL1xuICBhZGRQb3N0UHJvY2VzcyhjYWxsYmFjaykge1xuICAgIHRoaXMucG9zdFByb2Nlc3NvcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgcHJlIHByb2Nlc3NcbiAgICogQHJldHVybnMge1Byb2Nlc3N9XG4gICAqL1xuICBwZXJmb3JtUHJlUHJvY2VzcygpIHtcbiAgICB0aGlzLmRlcGVuZGVuY2llcy5mb3JFYWNoKGRlcGVuZGVuY3kgPT4ge1xuICAgICAgZGVwZW5kZW5jeS5wcm9jZXNzQ2FsbGJhY2soZGVwZW5kZW5jeS5wcm9jZXNzLl9yZXN1bHRzLCB0aGlzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBwb3N0IHByb2Nlc3MgYWZ0ZXIgdGhlIHByb2Nlc3MgaGFzIGVuZGVkXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBwZXJmb3JtUG9zdFByb2Nlc3MoZGF0YSkge1xuICAgIHRoaXMuX3Jlc3VsdHMgPSBkYXRhO1xuICAgIGxldCBkYXRhVG9Qcm9jZXNzID0gZGF0YTtcblxuICAgIHRoaXMucG9zdFByb2Nlc3NvcnMuZm9yRWFjaChjYWxsYmFjayA9PiB7XG4gICAgICBkYXRhVG9Qcm9jZXNzID0gY2FsbGJhY2soZGF0YVRvUHJvY2Vzcyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGFUb1Byb2Nlc3M7XG4gIH1cbn1cbiIsImltcG9ydCB7IFJ1bm5lciB9IGZyb20gJy4vcnVubmVyJztcbmltcG9ydCB7IFByb2Nlc3MgfSBmcm9tICcuL3Byb2Nlc3MnO1xuaW1wb3J0IFByb2dyZXNzUHJvbWlzZSBmcm9tICdwcm9ncmVzcy1wcm9taXNlJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBmZXRjaGVyIHByb2Nlc3NcbiAqQGV4dGVuZHMgUHJvY2Vzc1xuICovXG5leHBvcnQgY2xhc3MgRmV0Y2hlciBleHRlbmRzIFByb2Nlc3Mge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGZldGhjZXJcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucGFyYW1ldGVycyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIFVSTCBQYXJhbWV0ZXJzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgX3VybFBhcmFtZXRlcnMoKSB7XG4gICAgbGV0IHVybCA9ICcnO1xuXG4gICAgT2JqZWN0LmtleXModGhpcy5wYXJhbWV0ZXJzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAodXJsICE9PSAnJykge1xuICAgICAgICB1cmwgKz0gJyYnO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcmFtZXRlcnNba2V5XSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdXJsICs9IGtleSArICc9JyArIHRoaXMucGFyYW1ldGVyc1trZXldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5wYXJhbWV0ZXJzW2tleV0pLmZvckVhY2goa2V5MiA9PiB7XG4gICAgICAgICAgaWYgKHVybCAhPT0gJycpIHtcbiAgICAgICAgICAgIHVybCArPSAnJic7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLnBhcmFtZXRlcnNba2V5XVtrZXkyXSA9PT0gJycpIHtcbiAgICAgICAgICAgIHVybCArPSBrZXkgKyAnPScgKyBrZXkyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1cmwgKz0ga2V5ICsgJz0nICsga2V5MiArICc6JyArIHRoaXMucGFyYW1ldGVyc1trZXldW2tleTJdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB1cmxcbiAgICogQHRocm93cyBJbXBsZW1lbnRhdGlvbiBFcnJvclxuICAgKi9cbiAgZ2V0IHVybCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nob3VsZCBpbXBsZW1lbnQgdXJsIGdlbmVyYXRpb24nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBydW5uaW5nIHByb2Nlc3Mgc3RhcnRlZFxuICAgKiBAcmV0dXJucyB7UHJvZ3Jlc3NQcm9taXNlfVxuICAgKi9cbiAgZ2V0KCkge1xuICAgIHJldHVybiBuZXcgUnVubmVyKCkuZ2V0UmVzdWx0cyh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgcGFyZW1ldGVyc1xuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1ldGVycyAtIFRoZSBwYXJhbWV0ZXJzIHRvIGJlIHBhc3NlZCB0byB0aGUgdXJsXG4gICAqIEByZXR1cm5zIHtGZXRjaGVyfSAtIE9iamVjdCBvZiB0aGUgZmV0Y2hlclxuICAgKi9cbiAgc2V0UGFyYW1ldGVycyhwYXJhbWV0ZXJzKSB7XG4gICAgT2JqZWN0LmtleXMocGFyYW1ldGVycykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgdGhpcy5wYXJhbWV0ZXJzW2tleV0gPSBwYXJhbWV0ZXJzW2tleV07XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IERlcGVuZGVuY3kgcmVzdWx0c1xuICAgKiBAcmV0dXJucyB7UHJvZ3Jlc3NQcm9taXNlfVxuICAgKi9cbiAgZ2V0RGVwZW5kZWN5RmV0Y2hSZXN1bHRzKCkge1xuICAgIGNvbnN0IHByb21pc2VzID0gdGhpcy5kZXBlbmRlbmNpZXMubWFwKGRlcGVuZGVuY3kgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBSdW5uZXIoKS5nZXRSZXN1bHRzKGRlcGVuZGVuY3kucHJvY2Vzcyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gUHJvZ3Jlc3NQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gIH1cbiAgX2VuY29kZTY0KGJ1ZmYpIHtcbiAgICByZXR1cm4gYnRvYShuZXcgVWludDhBcnJheShidWZmKS5yZWR1Y2UoKHMsIGIpID0+IHMgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGIpLCAnJykpO1xuICB9XG4gIGhhc2goKSB7XG4gICAgcmV0dXJuIHRoaXMudXJsO1xuICB9XG59XG4iLCIvKipcbiAqIFRoaXMgcmVwcmVzZW50cyB0aGUgQW5hbHl0aWNzIFJlc3VsdHNcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBSb3cge1xuICAvKipcbiAgICogQ3JlYXRlcyBhbmEgQW5hbHl0aWNzIE9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSByb3cgLSBUaGUgYW5hbHl0aWNzIHJvd1xuICAgKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIC0gVGhlIGFuYWx5dGljcyBoZWFkZXJzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBtZXRhRGF0YSAtIFRoZSBhbmFseXRpY3MgbWV0YWRhdGFcbiAgICovXG4gIGNvbnN0cnVjdG9yKHJvdywgaGVhZGVycywgbWV0YURhdGEpIHtcbiAgICB0aGlzLnJvdyA9IHJvdztcbiAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgIHRoaXMubWV0YURhdGEgPSBtZXRhRGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkaW1lbnNpb24gZGV0YWlscyBvZiB0aGUgYW5hbHl0aWNzIHJvd1xuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIGRpbWVuc2lvblxuICAgKiBAcmV0dXJucyB7T2JqZWN0fHtpZCxuYW1lLHBhdGh9fSAtIFRoZSBkYXRhIG9iamVjdCB3aXRoIG5hbWUgYW5kIGlkXG4gICAqL1xuICBkaW1lbnNpb24oaWQpIHtcbiAgICB2YXIgaSA9IC0xLFxuICAgICAgbmFtZSA9ICcnO1xuXG4gICAgdGhpcy5oZWFkZXJzLmZvckVhY2goKGhlYWRlciwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChoZWFkZXIubmFtZSA9PT0gaWQpIHtcbiAgICAgICAgaSA9IGluZGV4O1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh0aGlzLm1ldGFEYXRhLm5hbWVzKSB7XG4gICAgICBuYW1lID0gdGhpcy5tZXRhRGF0YS5uYW1lc1t0aGlzLnJvd1tpXV07XG4gICAgfSBlbHNlIGlmICh0aGlzLm1ldGFEYXRhLml0ZW1zKSB7XG4gICAgICBuYW1lID0gdGhpcy5tZXRhRGF0YS5pdGVtc1t0aGlzLnJvd1tpXV0gPyB0aGlzLm1ldGFEYXRhLml0ZW1zW3RoaXMucm93W2ldXS5uYW1lIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMucm93W2ldLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIHBhdGg6XG4gICAgICAgIHRoaXMubWV0YURhdGEub3VIaWVyYXJjaHkgJiZcbiAgICAgICAgdGhpcy5tZXRhRGF0YS5vdUhpZXJhcmNoeVt0aGlzLnJvd1tpXV0gIT09IHVuZGVmaW5lZCA/IHRoaXMubWV0YURhdGEub3VIaWVyYXJjaHlbdGhpcy5yb3dbaV1dIDogdW5kZWZpbmVkXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkYXRhIGRldGFpbHMgb2YgdGhlIGFuYWx5dGljcyByb3dcbiAgICpcbiAgICogQHJldHVybnMge09iamVjdHx7aWQsbmFtZX19IC0gVGhlIGRhdGEgb2JqZWN0IHdpdGggbmFtZSBhbmQgaWRcbiAgICovXG4gIGdldCBkeCgpIHtcbiAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24oJ2R4Jyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcGVyaW9kIGRldGFpbHMgb2YgdGhlIGFuYWx5dGljcyByb3dcbiAgICpcbiAgICogQHJldHVybnMge09iamVjdHx7aWQsbmFtZX19IC0gVGhlIHBlcmlvZCBvYmplY3RcbiAgICovXG4gIGdldCBwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24oJ3BlJyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgb3JnYW5pc2F0aW9uIHVuaXQgZGV0YWlscyBvZiB0aGUgYW5hbHl0aWNzIHJvd1xuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fHtpZCxuYW1lLHBhdGh9fSAtIFRoZSBvcmdhbmlzYXRpb24gdW5pdCBvYmplY3RcbiAgICovXG4gIGdldCBvdSgpIHtcbiAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24oJ291Jyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdmFsdWUgaW4gYSByb3dcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gLSBUaGUgdmFsdWVcbiAgICovXG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24oJ3ZhbHVlJykuaWQ7XG4gIH1cbn1cbiIsImltcG9ydCB7Um93fSBmcm9tICcuL3Jvdyc7XG5cbi8qKlxuICogVGhpcyByZXByZXNlbnRzIHRoZSBBbmFseXRpY3MgUmVzdWx0c1xuICpcbiAqL1xuZXhwb3J0IGNsYXNzIEFuYWx5dGljc1Jlc3VsdCB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuYSBBbmFseXRpY3MgT2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAtIERISVMgQW5hbHl0aWNzIG9iamVjdFxuICAgKi9cbiAgY29uc3RydWN0b3IoYW5hbHl0aWNzT2JqZWN0KSB7XG4gICAgdGhpcy5fZGF0YSA9IGFuYWx5dGljc09iamVjdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBBbmFseXRpY3MgSGVhZGVycyBBcnJheVxuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IC0gREhJUyBBbmFseXRpY3MgaGVhZGVyc1xuICAgKi9cbiAgZ2V0IGhlYWRlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGEuaGVhZGVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBBbmFseXRpY3MgTWV0YWRhdGEgT2JqZWN0XG4gICAqXG4gICAqIEByZXR1cm5zIHsqfG1ldGFEYXRhfHtkaW1lbnNpb25zLCBuYW1lcywgZHgsIHBlLCBvdSwgY299fHtvdUhpZXJhcmNoeSwgaXRlbXMsIGRpbWVuc2lvbnN9fVxuICAgKi9cbiAgZ2V0IG1ldGFEYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl9kYXRhLm1ldGFEYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHJvd3Mgb2YgdGhlIGFuYWx5dGljcyBvYmplY3RcbiAgICpcbiAgICogQHJldHVybnMge0FycmF5fVxuICAgKi9cbiAgZ2V0IHJvd3MoKSB7XG4gICAgbGV0IHJvd3MgPSBbXTtcblxuICAgIHRoaXMuX2RhdGEucm93cy5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgIHJvd3MucHVzaChuZXcgUm93KHJvdywgdGhpcy5oZWFkZXJzLCB0aGlzLm1ldGFEYXRhKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJvd3M7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgQW5hbHl0aWNzIGhlaWdodFxuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSAtIFRoZSBudW1iZXIgb2Ygcm93c1xuICAgKi9cbiAgZ2V0IGhlaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YS5oZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgQW5hbHl0aWNzIHdpZHRoXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgd2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGEud2lkdGg7XG4gIH1cbn1cbiIsImltcG9ydCB7IEZldGNoZXIgfSBmcm9tICcuLi91dGlsaXRpZXMvZmV0Y2hlcic7XG5pbXBvcnQgeyBBbmFseXRpY3NSZXN1bHQgfSBmcm9tICcuLi9yZXN1bHQvYW5hbHl0aWNzLXJlc3VsdCc7XG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyByZXByZXNlbnRzIHRoZSBBbmFseXRpY3MgRmV0Y2hlciBmb3IgcHJvY2Vzc2luZyBmb3IgbWFraW5nIFdlYiBBUEkgY2FsbHNcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBhbmFseXRpY3MgPSBGbi5BbmFseXRpY3MoKTtcbiAqIEBleHRlbmRzIEZldGNoZXJcbiAqL1xuZXhwb3J0IGNsYXNzIEFuYWx5dGljcyBleHRlbmRzIEZldGNoZXIge1xuICAvKipcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYW4gYW5hbHl0aWNzIGZldGhjZXJcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiBkaGlzIGFuYWx5dGljcyBzdHJ1Y3R1cmUgdG8gdXNlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih2ZXJzaW9uID0gMjUpIHtcbiAgICBzdXBlcigpO1xuICAgIGlmICh0eXBlb2YgdmVyc2lvbiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICB2ZXJzaW9uID0gMjU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ZXJzaW9uID0gMjY7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucGFyYW1ldGVyc1snZGltZW5zaW9uJ10gPSB7fTtcbiAgICB0aGlzLnBvc3RQcm9jZXNzKGRhdGEgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuc3RhbmRhcmRpemVBbmFseXRpY3MoZGF0YSwgdmVyc2lvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZGF0YSBmb3IgdGhlIGZldGNoXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkeCBUaGUgaWQgb2YgdGhlIGRhdGEgdG8gZ2V0XG4gICAqIEByZXR1cm5zIHtBbmFseXRpY3N9IC0gT2JqZWN0IHdpdGggdGhlIGFuYWx5dGljcyBpbnRlcmFjdGlvbiBwcm9wZXJ0aWVzXG4gICAqL1xuICBzZXREYXRhKGR4KSB7XG4gICAgdGhpcy5zZXREaW1lbnNpb24oJ2R4JywgZHgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHBlcmlvZCBmb3IgdGhlIGZldGNoXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwZSBUaGUgaWQgb2YgdGhlIHBlcmlvZCB0byBnZXQgZGF0YSBmcm9tXG4gICAqIEByZXR1cm5zIHtBbmFseXRpY3N9IE9iamVjdCB3aXRoIHRoZSBhbmFseXRpY3MgaW50ZXJhY3Rpb24gcHJvcGVydGllc1xuICAgKi9cbiAgc2V0UGVyaW9kKHBlKSB7XG4gICAgdGhpcy5zZXREaW1lbnNpb24oJ3BlJywgcGUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG9yZ2FuaXNhdGlvbiB1bml0IGZvciB0aGUgZmV0Y2hpbmcgb2YgdGhlIGFuYWx5dGljc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gb3UgLSBPcmdhbmlzYXRpb24gdW5pdFxuICAgKiBAcmV0dXJucyB7QW5hbHl0aWNzfSBPYmplY3Qgd2l0aCB0aGUgYW5hbHl0aWNzIGludGVyYWN0aW9uIHByb3BlcnRpZXNcbiAgICovXG4gIHNldE9yZ1VuaXQob3UpIHtcbiAgICB0aGlzLnNldERpbWVuc2lvbignb3UnLCBvdSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZGltZW5zaW9uIGZvciB0aGUgZmV0Y2hpbmcgb2YgdGhlIGFuYWx5dGljc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gZGltIC0gRHluYW1pYyBEaW1lbnNpb24gaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBEeW5hbWljIGRpbWVuc2lvbiBvcHRpb25zIGlkZW50aWZpZXJzXG4gICAqIEByZXR1cm5zIHtBbmFseXRpY3N9IE9iamVjdCB3aXRoIHRoZSBhbmFseXRpY3MgaW50ZXJhY3Rpb24gcHJvcGVydGllc1xuICAgKi9cbiAgc2V0RGltZW5zaW9uKGRpbSwgdmFsdWUpIHtcbiAgICB0aGlzLnBhcmFtZXRlcnNbJ2RpbWVuc2lvbiddW2RpbV0gPSB2YWx1ZSA/IHZhbHVlIDogJyc7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU3RhbmRhcmRpemVzIHRoZSBhbmFseXRpY3Mgb2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhbmFseXRpY3NPYmplY3QgLSBUaGUgYW5hbHl0aWNzIG9iamVjdFxuICAgKiBAcGFyYW0ge051bWJlcn0gdmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG9mIGRoaXMgYW5hbHl0aWNzIHN0cnVjdHVyZSB0byB1c2VcbiAgICogQHJldHVybnMge0FuYWx5dGljc1Jlc3VsdH0gLSBPYmplY3Qgd2l0aCB0aGUgYW5hbHl0aWNzIHJlc3VsdHNcbiAgICovXG4gIHN0YW5kYXJkaXplQW5hbHl0aWNzKGFuYWx5dGljc09iamVjdCwgdmVyc2lvbiA9IDI1KSB7XG4gICAgaWYgKHR5cGVvZiB2ZXJzaW9uID09PSAnYm9vbGVhbicpIHtcbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIHZlcnNpb24gPSAyNTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZlcnNpb24gPSAyNjtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gaWYgU2VydmVyc2lkZSBFdmVudCBjbHVzdGVyaW5nIGRvIG5vdGhpbmdcbiAgICBpZiAoYW5hbHl0aWNzT2JqZWN0LmNvdW50KSB7XG4gICAgICByZXR1cm4gYW5hbHl0aWNzT2JqZWN0O1xuICAgIH1cbiAgICBsZXQgc2FuaXRpemVkQW5hbHl0aWNzT2JqZWN0ID0ge1xuICAgICAgaGVhZGVyczogW10sXG4gICAgICBtZXRhRGF0YToge1xuICAgICAgICBkaW1lbnNpb25zOiB7fSxcbiAgICAgICAgbmFtZXM6IHt9LFxuICAgICAgICBkeDogW10sXG4gICAgICAgIHBlOiBbXSxcbiAgICAgICAgb3U6IFtdLFxuICAgICAgICBjbzogW11cbiAgICAgIH0sXG4gICAgICByb3dzOiBbXVxuICAgIH07XG5cbiAgICBpZiAoYW5hbHl0aWNzT2JqZWN0KSB7XG4gICAgICAvKipcbiAgICAgICAqIENoZWNrIGhlYWRlcnNcbiAgICAgICAqL1xuICAgICAgaWYgKGFuYWx5dGljc09iamVjdC5oZWFkZXJzKSB7XG4gICAgICAgIGFuYWx5dGljc09iamVjdC5oZWFkZXJzLmZvckVhY2goaGVhZGVyID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IG5ld0hlYWRlciA9IGhlYWRlcjtcblxuICAgICAgICAgICAgc2FuaXRpemVkQW5hbHl0aWNzT2JqZWN0LmhlYWRlcnMucHVzaChuZXdIZWFkZXIpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBoZWFkZXIgb2JqZWN0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDaGVjayBtZXRhRGF0YVxuICAgICAgICovXG4gICAgICBpZiAoYW5hbHl0aWNzT2JqZWN0Lm1ldGFEYXRhKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbGV0IHNhbml0aXplZE1ldGFkYXRhID0gdGhpcy5nZXRTYW5pdGl6ZWRBbmFseXRpY3NNZXRhZGF0YShcbiAgICAgICAgICAgIGFuYWx5dGljc09iamVjdC5tZXRhRGF0YSxcbiAgICAgICAgICAgIHZlcnNpb25cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgc2FuaXRpemVkQW5hbHl0aWNzT2JqZWN0Lm1ldGFEYXRhID0gc2FuaXRpemVkTWV0YWRhdGE7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgbWV0YWRhdGEgb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDaGVjayByb3dzXG4gICAgICAgKi9cbiAgICAgIGlmIChhbmFseXRpY3NPYmplY3Qucm93cykge1xuICAgICAgICBzYW5pdGl6ZWRBbmFseXRpY3NPYmplY3Qucm93cyA9IGFuYWx5dGljc09iamVjdC5yb3dzO1xuICAgICAgfVxuICAgIH1cbiAgICBzYW5pdGl6ZWRBbmFseXRpY3NPYmplY3QuaGVpZ2h0ID0gYW5hbHl0aWNzT2JqZWN0LmhlaWdodDtcbiAgICBzYW5pdGl6ZWRBbmFseXRpY3NPYmplY3Qud2lkdGggPSBhbmFseXRpY3NPYmplY3Qud2lkdGg7XG4gICAgcmV0dXJuIG5ldyBBbmFseXRpY3NSZXN1bHQoc2FuaXRpemVkQW5hbHl0aWNzT2JqZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFuZGFyZGl6ZXMgdGhlIGFuYWx5dGljcyBtZXRhZGF0YSBvYmplY3RcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFuYWx5dGljTWV0YWRhdGEgLSBUaGUgYW5hbHl0aWNzIG1ldGFkYXRhIG9iamVjdFxuICAgKiBAcGFyYW0ge051bWJlcn0gdmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG9mIGRoaXMgYW5hbHl0aWNzIHN0cnVjdHVyZSB0byB1c2VcbiAgICogQHJldHVybnMge09iamVjdH0gLSBPYmplY3Qgd2l0aCB0aGUgYW5hbHl0aWNzIG1ldGFkYXRhXG4gICAqL1xuICBnZXRTYW5pdGl6ZWRBbmFseXRpY3NNZXRhZGF0YShhbmFseXRpY01ldGFkYXRhLCB2ZXJzaW9uKSB7XG4gICAgbGV0IHNhbml0aXplZE1ldGFkYXRhID0ge307XG5cbiAgICBpZiAoYW5hbHl0aWNNZXRhZGF0YSkge1xuICAgICAgaWYgKGFuYWx5dGljTWV0YWRhdGEub3VIaWVyYXJjaHkpIHtcbiAgICAgICAgc2FuaXRpemVkTWV0YWRhdGEub3VIaWVyYXJjaHkgPSBhbmFseXRpY01ldGFkYXRhLm91SGllcmFyY2h5O1xuICAgICAgfVxuICAgICAgaWYgKHZlcnNpb24gPCAyNikge1xuICAgICAgICAvLyBHZXQgb2xkIHN0cnVjdHVyZVxuICAgICAgICBzYW5pdGl6ZWRNZXRhZGF0YS5uYW1lcyA9IHt9O1xuICAgICAgICBpZiAoYW5hbHl0aWNNZXRhZGF0YS5uYW1lcykge1xuICAgICAgICAgIHNhbml0aXplZE1ldGFkYXRhLm5hbWVzID0gYW5hbHl0aWNNZXRhZGF0YS5uYW1lcztcbiAgICAgICAgfSBlbHNlIGlmIChhbmFseXRpY01ldGFkYXRhLml0ZW1zKSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMoYW5hbHl0aWNNZXRhZGF0YS5pdGVtcykuZm9yRWFjaChuYW1lS2V5ID0+IHtcbiAgICAgICAgICAgIHNhbml0aXplZE1ldGFkYXRhLm5hbWVzW25hbWVLZXldID1cbiAgICAgICAgICAgICAgYW5hbHl0aWNNZXRhZGF0YS5pdGVtc1tuYW1lS2V5XS5uYW1lO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFuYWx5dGljTWV0YWRhdGEuZGltZW5zaW9ucykge1xuICAgICAgICAgIE9iamVjdC5rZXlzKGFuYWx5dGljTWV0YWRhdGEuZGltZW5zaW9ucykuZm9yRWFjaChuYW1lS2V5ID0+IHtcbiAgICAgICAgICAgIHNhbml0aXplZE1ldGFkYXRhW25hbWVLZXldID0gYW5hbHl0aWNNZXRhZGF0YS5kaW1lbnNpb25zW25hbWVLZXldO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBHZXQgbmV3IHN0cnVjdHVyZVxuICAgICAgICBzYW5pdGl6ZWRNZXRhZGF0YS5pdGVtcyA9IHt9O1xuICAgICAgICBpZiAoYW5hbHl0aWNNZXRhZGF0YS5pdGVtcykge1xuICAgICAgICAgIHNhbml0aXplZE1ldGFkYXRhLml0ZW1zID0gYW5hbHl0aWNNZXRhZGF0YS5pdGVtcztcbiAgICAgICAgfSBlbHNlIGlmIChhbmFseXRpY01ldGFkYXRhLm5hbWVzKSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMoYW5hbHl0aWNNZXRhZGF0YS5pdGVtcykuZm9yRWFjaChuYW1lS2V5ID0+IHtcbiAgICAgICAgICAgIGFuYWx5dGljTWV0YWRhdGEuaXRlbXNbbmFtZUtleV0gPSB7XG4gICAgICAgICAgICAgIG5hbWU6IGFuYWx5dGljTWV0YWRhdGEubmFtZXNbbmFtZUtleV1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFuYWx5dGljTWV0YWRhdGEuZGltZW5zaW9ucykge1xuICAgICAgICAgIHNhbml0aXplZE1ldGFkYXRhLmRpbWVuc2lvbnMgPSB7fTtcbiAgICAgICAgICBPYmplY3Qua2V5cyhhbmFseXRpY01ldGFkYXRhKS5mb3JFYWNoKG5hbWVLZXkgPT4ge1xuICAgICAgICAgICAgaWYgKFsnbmFtZXMnLCAnaXRlbXMnLCAnZGltZW5zaW9ucyddLmluZGV4T2YobmFtZUtleSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgIHNhbml0aXplZE1ldGFkYXRhLmRpbWVuc2lvbnNbbmFtZUtleV0gPSBhbmFseXRpY01ldGFkYXRhW25hbWVLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNhbml0aXplZE1ldGFkYXRhLmRpbWVuc2lvbnMgPSBhbmFseXRpY01ldGFkYXRhLmRpbWVuc2lvbnM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNhbml0aXplZE1ldGFkYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHVybCBmb3IgZmV0Y2hpbmdcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuICdhbmFseXRpY3M/JyArIHRoaXMuX3VybFBhcmFtZXRlcnM7XG4gIH1cbn1cbiIsIi8vIEZhbGxiYWNrIGZvciBlbmdpbmVzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBTeW1ib2xcbmNvbnN0IExJU1RFTkVSUyA9IFN5bWJvbCA/IFN5bWJvbCgpIDogJ19fbGlzdGVuZXJzJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIFByb2dyZXNzIFByb21pc2VcbiAqIEBleHRlbmRzIFByb21pc2VcbiAqL1xuZXhwb3J0IGNsYXNzIFByb2dyZXNzUHJvbWlzZSBleHRlbmRzIFByb21pc2Uge1xuICBjb25zdHJ1Y3RvcihleGVjdXRvcikge1xuICAgIHN1cGVyKChyZXNvbHZlLCByZWplY3QpID0+XG4gICAgICBleGVjdXRvcihcbiAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0LFxuICAgICAgICAvLyBQYXNzIG1ldGhvZCBmb3IgcGFzc2luZyBwcm9ncmVzcyB0byBsaXN0ZW5lclxuICAgICAgICB2YWx1ZSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzW0xJU1RFTkVSU10uZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcih2YWx1ZSkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICApXG4gICAgKTtcbiAgICB0aGlzW0xJU1RFTkVSU10gPSBbXTtcbiAgfVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtjYWxsYmFja30gaGFuZGxlclxuICAgKi9cbiAgcHJvZ3Jlc3MoaGFuZGxlcikge1xuICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQUk9HUkVTU19SRVFVSVJFU19GVU5DVElPTicpO1xuICAgIH1cbiAgICB0aGlzW0xJU1RFTkVSU10ucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBwcm9taXNlc1xuICAgKi9cbiAgc3RhdGljIGFsbChwcm9taXNlcykge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBuZXcgQXJyYXkocHJvbWlzZXMubGVuZ3RoKTtcbiAgICBjb25zdCBsZW5ndGggPSBwcm9taXNlcy5sZW5ndGg7XG4gICAgbGV0IHJlc29sdmVDb3VudCA9IDA7XG5cbiAgICByZXR1cm4gbmV3IFByb2dyZXNzUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0LCBwcm9ncmVzcykgPT4ge1xuICAgICAgcHJvbWlzZXMuZm9yRWFjaCgocHJvbWlzZSwgaW5kZXgpID0+IHtcbiAgICAgICAgcHJvbWlzZVxuICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICByZXN1bHRzW2luZGV4XSA9IHJlc3VsdDtcbiAgICAgICAgICAgIHJlc3VsdHMucHJvcG9ydGlvbiA9ICsrcmVzb2x2ZUNvdW50IC8gbGVuZ3RoO1xuICAgICAgICAgICAgcHJvZ3Jlc3MocmVzdWx0cyk7XG4gICAgICAgICAgICBpZiAocmVzb2x2ZUNvdW50ID09PSBsZW5ndGgpIHJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGlucHV0c1xuICAgKiBAcGFyYW0geyp9IGhhbmRsZXJcbiAgICovXG4gIHN0YXRpYyBzZXF1ZW5jZShpbnB1dHMsIGhhbmRsZXIpIHtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgY29uc3QgbGVuZ3RoID0gaW5wdXRzLmxlbmd0aDtcbiAgICBsZXQgcmVzb2x2ZUNvdW50ID0gMDtcblxuICAgIHJldHVybiBuZXcgUHJvZ3Jlc3NQcm9taXNlKChyZXNvbHZlLCByZWplY3QsIHByb2dyZXNzKSA9PiB7XG4gICAgICBmdW5jdGlvbiBpbnZva2VOZXh0KCkge1xuICAgICAgICBoYW5kbGVyXG4gICAgICAgICAgLmNhbGwobnVsbCwgaW5wdXRzW3Jlc3VsdHMubGVuZ3RoXSlcbiAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICByZXN1bHRzLnByb3BvcnRpb24gPSArK3Jlc29sdmVDb3VudCAvIGxlbmd0aDtcbiAgICAgICAgICAgIHByb2dyZXNzKHJlc3VsdHMpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID09PSBsZW5ndGgpIHJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICBlbHNlIGludm9rZU5leHQoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgfVxuICAgICAgaW52b2tlTmV4dCgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBSdW5uZXIgfSBmcm9tICcuL3J1bm5lcic7XG5pbXBvcnQgeyBGZXRjaGVyIH0gZnJvbSAnLi9mZXRjaGVyJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBtdWx0aXBsZSBmZXRjaGVyIHByb2Nlc3NcbiAqQGV4dGVuZHMgRmV0Y2hlclxuICovXG5leHBvcnQgY2xhc3MgTXVsdGlGZXRjaGVyIGV4dGVuZHMgRmV0Y2hlciB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmZXRoY2VyXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoZmV0Y2hlcnMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2ZldGNoZXJzID0gZmV0Y2hlcnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgRmV0Y2hlcnNcbiAgICogQHJldHVybnMge2FycmF5fSBmZXRjaGVycyAtIEFycmF5IG9mIEZldGNoZXJzXG4gICAqL1xuICBnZXQgZmV0Y2hlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZldGNoZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGV4ZWN1dGVkIFByb21pc2VcbiAgICogQHJldHVybnMge1Byb2dyZXNzUHJvbWlzZX0gcHJvZ3Jlc3NQcm9taXNlIC0gUHJvbWlzZSB3aGljaCBhbGVydHMgcHJvZ3Jlc3NzXG4gICAqL1xuICBnZXQoKSB7XG4gICAgcmV0dXJuIChuZXcgUnVubmVyKCkpLmdldEFsbFJlc3VsdHModGhpcyk7XG4gIH1cbn1cbiIsImltcG9ydCB7QW5hbHl0aWNzfSBmcm9tICcuL21vZGVsL2FuYWx5dGljcy5qcyc7XG5pbXBvcnQge0FuYWx5dGljc1Jlc3VsdCB9IGZyb20gJy4vcmVzdWx0L2FuYWx5dGljcy1yZXN1bHQnO1xuaW1wb3J0IHtFdmVudEFuYWx5dGljc30gZnJvbSAnLi9tb2RlbC9ldmVudC1hbmFseXRpY3MnO1xuaW1wb3J0IHtTUUxWaWV3RGF0YX0gZnJvbSAnLi9tb2RlbC9zcWwtdmlldy5qcyc7XG5pbXBvcnQge1Byb2dyZXNzUHJvbWlzZX0gZnJvbSAnLi91dGlsaXRpZXMvcHJvZ3Jlc3MtcHJvbWlzZSc7XG5pbXBvcnQge1J1bm5lcn0gZnJvbSAnLi91dGlsaXRpZXMvcnVubmVyLmpzJztcbmltcG9ydCB7RGVwZW5kZW5jeX0gZnJvbSAnLi91dGlsaXRpZXMvZGVwZW5kZW5jeSc7XG5pbXBvcnQge011bHRpRmV0Y2hlcn0gZnJvbSAnLi91dGlsaXRpZXMvbXVsdGktZmV0Y2hlcic7XG5pbXBvcnQge0lkZW50aWZpYWJsZU9iamVjdH0gZnJvbSAnLi9tb2RlbC9pZGVudGlmaWFibGUtb2JqZWN0LmpzJztcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBtYWluIGhvbGRlciBmb3IgdGhlIGZ1bmN0aW9uYWxpdGllcyBvZiB0aGUgZnVuY3Rpb25cbiAqIEB0eXBlIHt7UHJvbWlzZTogUHJvZ3Jlc3NQcm9taXNlLCBBbmFseXRpY3M6IEFuYWx5dGljcyxcbiAgKiAgIEFuYWx5dGljc1Jlc3VsdDogQW5hbHl0aWNzUmVzdWx0LFxuICAqICAgT3JnYW5pc2F0aW9uVW5pdDogT3JnYW5pc2F0aW9uVW5pdCwgU1FMVmlld0RhdGE6IFNRTFZpZXdEYXRhLFxuICAqICAgUnVubmVyOiBSdW5uZXIsIERlcGVuZGVuY3k6IERlcGVuZGVuY3ksIE11bHRpRmV0Y2hlcjogTXVsdGlGZXRjaGVyLFxuICAqICAgYWxsOiAoZnVuY3Rpb24oRmV0Y2hlcltdKSksIGluaXQ6IChmdW5jdGlvbigqPSkpfVxuICAqIH1cbiAqL1xubGV0IEZuID0ge1xuICBQcm9taXNlOiBQcm9ncmVzc1Byb21pc2UsXG4gIEFuYWx5dGljczogQW5hbHl0aWNzLFxuICBFdmVudEFuYWx5dGljczogRXZlbnRBbmFseXRpY3MsXG4gIEFuYWx5dGljc1Jlc3VsdDogQW5hbHl0aWNzUmVzdWx0LFxuICBJZGVudGlmaWFibGVPYmplY3Q6IElkZW50aWZpYWJsZU9iamVjdCxcbiAgU1FMVmlld0RhdGE6IFNRTFZpZXdEYXRhLFxuICBSdW5uZXI6IFJ1bm5lcixcbiAgRGVwZW5kZW5jeTogRGVwZW5kZW5jeSxcbiAgTXVsdGlGZXRjaGVyOiBNdWx0aUZldGNoZXIsXG4gIC8qKlxuICAgKiBBZGRzIG11bHRpcGxlIGZldGNoZXJzIGluIHF1ZXVlIGZvciBleGVjdXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RmV0Y2hlcltdfSBmZXRjaGVycyAtIFRoZSBmZXRoZXJzIGlzIGFuIGFycmF5IG9mIHRoZSBmZXRjaGVyc1xuICAgKiBAcmV0dXJucyB7UHJvZ3Jlc3NQcm9taXNlfSAtIFByb2dyZXNzIFByb21pc2UgZm9yIGZldGNoaW5nIHRoZSB2YXJpb3VzIGZldGNoZXJzXG4gICAqIEBleGFtcGxlXG4gICAqIEZuLmFsbChbbmV3IEZuLkFuYWx5dGljcygpLCBuZXcgRm4uT3JnYW5pc2F0aW9uVW5pdCgpXSk7XG4gICAqL1xuICBhbGw6IGZldGNoZXJzID0+IHtcbiAgICByZXR1cm4gbmV3IE11bHRpRmV0Y2hlcihmZXRjaGVycyk7XG4gIH0sXG4gIC8qKlxuICAgKiBDb25maWd1cmVzIHRoZSBydW5uaW5nIGVudmlyb25tZW50IHBhcmFtZXRlcnNcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ3VyYXRpb24gLSBUaGUgZmV0aGVycyBpcyBhbiBhcnJheSBvZiB0aGUgZmV0Y2hlcnNcbiAgICogQHJldHVybnMge1Byb2dyZXNzUHJvbWlzZX0gLSBQcm9ncmVzcyBQcm9taXNlIGZvciBmZXRjaGluZyB0aGUgdmFyaW91cyBmZXRjaGVyc1xuICAgKiBAZXhhbXBsZVxuICAgKiBGbi5hbGwoe2Jhc2VVcmw6Jyd9KTtcbiAgICovXG4gIGluaXQ6IGNvbmZpZyA9PiB7XG4gICAgUnVubmVyLmluaXRpYXRlUnVubmVyKGNvbmZpZyk7XG4gIH1cbn07XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cuRm4gPSBGbjtcbn1cbmV4cG9ydCB7IEZuIH07XG4iLCJpbXBvcnQgeyBBbmFseXRpY3MgfSBmcm9tICcuL2FuYWx5dGljcyc7XG5cbi8qKlxuICogVGhpcyByZXByZXNlbnRzIHRoZSBFdmVudCBBbmFseXRpY3MgRmV0Y2hlciBmb3IgcHJvY2Vzc2luZyBhbmFseXRpY3MgY2FsbHNcbiAqXG4gKiBAZXh0ZW5kcyBBbmFseXRpY3NcbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50QW5hbHl0aWNzIGV4dGVuZHMgQW5hbHl0aWNzIHtcbiAgLyoqXG4gICAqIFNldHMgdGhlIFByb2dyYW0gZm9yIHRoZSBmZXRjaFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvZ3JhbSAtIFRoZSBpZCBvZiB0aGUgcHJvZ3JhbVxuICAgKiBAcmV0dXJucyB7RXZlbnRBbmFseXRpY3N9IC0gT2JqZWN0IHdpdGggdGhlIGV2ZW50IGFuYWx5dGljc1xuICAgKi9cbiAgc2V0UHJvZ3JhbShwcm9ncmFtKSB7XG4gICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgdXJsIGZvciBmZXRjaGluZ1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IHVybCgpIHtcbiAgICByZXR1cm4gJ2FuYWx5dGljcy9ldmVudHMvcXVlcnkvJyArIHRoaXMucHJvZ3JhbSArICc/JyArIHRoaXMuX3VybFBhcmFtZXRlcnM7XG4gIH1cbn1cbiIsImltcG9ydCB7IEZldGNoZXIgfSBmcm9tICcuLi91dGlsaXRpZXMvZmV0Y2hlcic7XG5cbi8qKlxuICogUmVwcmVzZW50cyBJZGVudGlmaWFibGUgT2JqZWN0XG4gKkBleHRlbmRzIEZldGNoZXJcbiAqL1xuZXhwb3J0IGNsYXNzIElkZW50aWZpYWJsZU9iamVjdCBleHRlbmRzIEZldGNoZXIge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGlkZW50aWZpYWJsZSBvYmplY3QgZmV0Y2hlclxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9iamVjdE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgaWRlbnRpZmlhYmxlIG9iamVjdCBhcyB1c2VkIGluIHRoZSB3ZWIgYXBpXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGlkZW50aWZpYWJsZU9iamVjdCA9IG5ldyBGbi5JZGVudGlmaWFibGVPYmplY3QoJ29yZ2FuaXNhdGlvblVuaXRzJyk7IC8vIE9yZ2FuaXNhdGlvbiBVbml0IGZldGNoZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9iamVjdE5hbWUpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2ZpbHRlcnMgPSBbXTtcbiAgICB0aGlzLm9iamVjdE5hbWUgPSBvYmplY3ROYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG5hbWUgb2YgdGhlIGlkZW50aWZpYWJsZSBvYmplY3RcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSBuYW1lIG9mIHRoZSBJZGVudGlmaWJhbGUgT2JqZWN0XG4gICAqL1xuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3ROYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHdoZXJlIGNsYXVzZSBmb3IgZmlsdGVyaW5nIG9mIGRhdGFcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJpZ2h0IC0gUmlnaHQgZXhwcmVzc2lvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0b3IgLSBFeHByZXNzaW9uIG9wZXJhdG9yXG4gICAqIEBwYXJhbSB7c3RyaW5nfGFycmF5fSBsZWZ0IC0gUmlnaHQgZXhwcmVzc2lvblxuICAgKiBAcmV0dXJucyB7SWRlbnRpZmlhYmxlT2JqZWN0fSBJZGVudGlmaWFibGVPYmplY3QgSWRlbnRpZmlhYmxlIG9iamVjdCB3aXRoIHdoZXJlIGNsYXVzZSBhcHBlbmRlZFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBvcmdhbmlzYXRpb25Vbml0ID0gbmV3IEZuLklkZW50aWZpYWJsZU9iamVjdCgnb3JnYW5pc2F0aW9uVW5pdHMnKTtcbiAgICogb3JnYW5pc2F0aW9uVW5pdC53aGVyZSgnbGV2ZWwnLCc9PScsNCk7IC8vV2lsbCBzZXQgdG8gZmV0Y2ggb3JnYW5pc2F0aW9uIHVuaXRzIGF0IGxldmVsIDRcbiAgICogb3JnYW5pc2F0aW9uVW5pdC53aGVyZSgnY2hpbGRyZW4nLCdlbXB0eScpOyAvL1dpbGwgc2V0IHRvIGZldGNoIG9yZ2FuaXNhdGlvbiB1bml0cyB3aXRoIG5vIGNoaWxkcmVuXG4gICAqL1xuICB3aGVyZShyaWdodCwgb3BlcmF0b3IsIGxlZnQpIHtcbiAgICB0aGlzLl9maWx0ZXJzLnB1c2goe1xuICAgICAgcmlnaHQ6IHJpZ2h0LFxuICAgICAgb3BlcmF0b3I6IG9wZXJhdG9yLFxuICAgICAgbGVmdDogbGVmdFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHVybCBmb3IgZmV0Y2hpbmdcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGdldCB1cmwoKSB7XG4gICAgdmFyIHVybCA9IHRoaXMuX3VybFBhcmFtZXRlcnM7XG5cbiAgICB0aGlzLl9maWx0ZXJzLmZvckVhY2goZmlsdGVyID0+IHtcbiAgICAgIGlmICh1cmwgIT09ICcnKSB7XG4gICAgICAgIHVybCArPSAnJic7XG4gICAgICB9XG4gICAgICB1cmwgKz0gJ2ZpbHRlcj0nICsgZmlsdGVyLnJpZ2h0O1xuICAgICAgaWYgKGZpbHRlci5vcGVyYXRvciA9PT0gJz09Jykge1xuICAgICAgICB1cmwgKz0gJzplcTonICsgZmlsdGVyLmxlZnQ7XG4gICAgICB9IGVsc2UgaWYgKGZpbHRlci5vcGVyYXRvciA9PT0gJzwnKSB7XG4gICAgICAgIHVybCArPSAnOmx0OicgKyBmaWx0ZXIubGVmdDtcbiAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLm9wZXJhdG9yID09PSAnPD0nKSB7XG4gICAgICAgIHVybCArPSAnOmxlOicgKyBmaWx0ZXIubGVmdDtcbiAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLm9wZXJhdG9yID09PSAnPicpIHtcbiAgICAgICAgdXJsICs9ICc6Z3Q6JyArIGZpbHRlci5sZWZ0O1xuICAgICAgfSBlbHNlIGlmIChmaWx0ZXIub3BlcmF0b3IgPT09ICc+PScpIHtcbiAgICAgICAgdXJsICs9ICc6Z2U6JyArIGZpbHRlci5sZWZ0O1xuICAgICAgfSBlbHNlIGlmIChmaWx0ZXIub3BlcmF0b3IgPT09ICc8PicpIHtcbiAgICAgICAgdXJsICs9ICc6IWVxOicgKyBmaWx0ZXIubGVmdDtcbiAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLm9wZXJhdG9yID09PSAnaW4nIHx8IGZpbHRlci5vcGVyYXRvciA9PT0gJyFpbicpIHtcbiAgICAgICAgdXJsICs9ICc6JyArIGZpbHRlci5vcGVyYXRvciArICc6WycgKyBmaWx0ZXIubGVmdCArICddJztcbiAgICAgIH0gZWxzZSBpZiAoIWZpbHRlci5sZWZ0KSB7XG4gICAgICAgIHVybCArPSAnOicgKyBmaWx0ZXIub3BlcmF0b3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cmwgKz0gJzonICsgZmlsdGVyLm9wZXJhdG9yICsgJzonICsgZmlsdGVyLmxlZnQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMubmFtZSArICcuanNvbj8nICsgdXJsO1xuICB9XG59XG4iLCJpbXBvcnQgeyBGZXRjaGVyIH0gZnJvbSAnLi4vdXRpbGl0aWVzL2ZldGNoZXInO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBmZXRjaGVyIHRvIGxvYWQgc3FsIHZpZXcgZGF0YVxuICpcbiAqIEBleHRlbmRzIEZldGNoZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFNRTFZpZXdEYXRhIGV4dGVuZHMgRmV0Y2hlciB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGhlIFNRTFZpZXdEYXRhIEluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBTcWwgVmlldyBpZGVudGlmaWVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5faWQgPSBpZDtcbiAgICB0aGlzLnBhcmFtZXRlcnNbJ3ZhciddID0ge307XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFyaWFibGUgZm9yIHRoZSBmZXRjaGluZyBvZiB0aGUgc3FsIHZpZXcgZGF0YVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFyaWFibGUgLSBWYXJpYWJsZSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFZhbHVlIG9mIHRoZSB2YXJpYWJsZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm5zIHtTUUxWaWV3RGF0YX0gLSBPYmplY3Qgb2YgdGhlIHNxbCB2aWV3XG4gICAqL1xuICBzZXRWYXJpYWJsZSh2YXJpYWJsZSwgdmFsdWUpIHtcbiAgICB0aGlzLnBhcmFtZXRlcnNbJ3ZhciddW3ZhcmlhYmxlXSA9IHZhbHVlID8gdmFsdWUgOiAnJztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgdXJsIGZvciBmZXRjaGluZ1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IHVybCgpIHtcbiAgICBsZXQgdXJsID0gJ3NxbFZpZXdzLycgKyB0aGlzLl9pZCArICcvZGF0YS5qc29uPycgKyB0aGlzLl91cmxQYXJhbWV0ZXJzO1xuXG4gICAgcmV0dXJuIHVybDtcbiAgfVxufVxuIiwiLyoqXG4gKiBUaGlzIGNhbGxiYWNrIHR5cGUgaXMgY2FsbGVkIGBwcm9jZXNzQ2FsbGJhY2tgLlxuICpcbiAqIEBjYWxsYmFjayBwcm9jZXNzQ2FsbGJhY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXN1bHRcbiAqL1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBwcm9jZXNzIGRlcGVuZGVuY3lcbiAqL1xuZXhwb3J0IGNsYXNzIERlcGVuZGVuY3kge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGRlcGVuZGVuY3kgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtQcm9jZXNzfSBwcm9jZXNzXG4gICAqIEBwYXJhbSB7cHJvY2Vzc0NhbGxiYWNrfSBwcm9jZXNzQ2FsbGJhY2tcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb2Nlc3MsIHByb2Nlc3NDYWxsYmFjaykge1xuICAgIHRoaXMucHJvY2VzcyA9IHByb2Nlc3M7XG4gICAgdGhpcy5wcm9jZXNzQ2FsbGJhY2sgPSBwcm9jZXNzQ2FsbGJhY2s7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=